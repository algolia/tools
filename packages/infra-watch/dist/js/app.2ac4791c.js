(function(e){function t(t){for(var a,i,l=t[0],c=t[1],o=t[2],p=0,d=[];p<l.length;p++)i=l[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,o||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,l=1;l<n.length;l++){var c=n[l];0!==r[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/infra-watch/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var o=0;o<l.length;o++)t(l[o]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("dde3"),n("c8a0"),n("3cdf"),n("5c85");var a=n("9869"),r=n("9ce4"),s=n("5552"),i=function(e,t,n){e=e||{},t=e.storage||window&&window.localStorage,n=e.key||"vuex";var a=500,r=null;function i(e,t,n){try{return(n=t.getItem(e))&&"undefined"!==typeof n?JSON.parse(n):void 0}catch(a){}}function l(t,n,s){window.clearTimeout(r),r=window.setTimeout((function(){var a=n;e.reducer&&(a=e.reducer(n)),s.setItem(t,JSON.stringify(a))}),a)}return function(e){var a=i(n,t);if("object"===Object(s["a"])(a)&&null!==a){var r;for(r in e.state)void 0===a[r]&&(a[r]=e.state[r]);e.replaceState(a)}e.subscribe((function(e,a){l(n,a,t)}))}},l=(n("2e73"),n("0c1f"),function(){return{namespaced:!0,state:{searchParams:{},searchParams2:{},indexSettings:{},advancedIndexSettings:{},refIndexSettings:{},imageAttributeName:null,autoTitleAttributeName:null,titleAttribute:"",ignoreImageProxy:!1,imageSize:40,imageBaseUrl:"",imageSuffixUrl:"",lastUsed:(new Date).getTime()},mutations:{replaceIndexData:function(e,t){Object.keys(t).forEach((function(n){void 0!==e[n]&&a["a"].set(e,n,t[n])}))},updateLastUsed:function(e){e.lastUsed=(new Date).getTime()},replaceIndexSettings:function(e,t){var n=t;a["a"].set(e,"indexSettings",{}),Object.keys(n).forEach((function(t){a["a"].set(e.indexSettings,t,{value:n[t],enabled:!0})})),a["a"].set(e,"refIndexSettings",JSON.parse(JSON.stringify(e.indexSettings)))},setImageSize:function(e,t){a["a"].set(e,"imageSize",t)},setIgnoreImageProxy:function(e,t){a["a"].set(e,"ignoreImageProxy",t)},setAutoTitleAttributeName:function(e,t){a["a"].set(e,"autoTitleAttributeName",t)},setTitleAttribute:function(e,t){a["a"].set(e,"titleAttribute",t)},resetIndexSettings:function(e){a["a"].set(e,"indexSettings",JSON.parse(JSON.stringify(e.refIndexSettings)))},setImageAttributeName:function(e,t){a["a"].set(e,"imageAttributeName",t)},setImageBaseUrl:function(e,t){a["a"].set(e,"imageBaseUrl",t)},setImageSuffixUrl:function(e,t){a["a"].set(e,"imageSuffixUrl",t)},restoreIndexSetting:function(e,t){var n=t.inputKey;a["a"].set(e.indexSettings,n,JSON.parse(JSON.stringify(e.refIndexSettings[n])))},setAdvancedIndexSettings:function(e,t){a["a"].set(e,"advancedIndexSettings",t)},setParamValue:function(e,t){var n=t.configKey||this.state.edit.configKey;a["a"].set(e[n],t.key,{value:t.value,enabled:!0})},setParamEnabled:function(e,t){a["a"].set(e[t.configKey][t.inputKey],"enabled",t.value)},deleteParam:function(e,t){a["a"].delete(e[t.configKey],t.inputKey)},deleteArrayElement:function(e,t){a["a"].delete(e[t.configKey][t.inputKey].value,t.positionKey)},setKeysIndexer:function(e,t){a["a"].set(e,"keysIndexer",t)},setIndexAnalyzer:function(e,t){a["a"].set(e,"indexAnalyzer",t)}}}}),c=function(e,t,n){return{namespaced:!0,state:{key:t,lastIndexName:n,userId:null,__app_name:"",__app_owner:""},mutations:{setLastIndexName:function(e,t){a["a"].set(e,n,t)},setAppName:function(e,t){a["a"].set(e,"__app_name",t)},setAppOwner:function(e,t){a["a"].set(e,"__app_owner",t)},setUserId:function(e,t){a["a"].set(e,"userId",t)},addIndex:function(t,n){var a=n,r=["apps",e,a],s=this._modules.get(r);void 0===s&&(t[a]?this.registerModule(["apps",e,a],l(),{preserveState:!0}):this.registerModule(["apps",e,a],l()),s=this._modules.get(r)),s.context.commit("updateLastUsed")}}}},o={namespaced:!0,modules:{},mutations:{addAppId:function(e,t){var n=t.appId,r=["apps",n],s=this._modules.get(r),i=t.apiKey||null;void 0!==s&&e[n]?t.apiKey&&a["a"].set(e[n],"key",i):(e[n]?this.registerModule(["apps",n],c(n,i),{preserveState:!0}):this.registerModule(["apps",n],c(n,i,null)),null===this.state.panels.leftPanel.appId&&a["a"].set(this.state.panels.leftPanel,"appId",n),null===this.state.panels.rightPanel.appId&&a["a"].set(this.state.panels.rightPanel,"appId",n))},deleteAppId:function(e,t){var n=t,r=["apps",n],s=this._modules.get(r);s&&this.unregisterModule(r),a["a"].delete(e,n);var i=null,l=Object.keys(e);l.length>0&&(i=l[0]),this.state.panels.leftPanel.appId===n&&a["a"].set(this.state.panels.leftPanel,"appId",i),this.state.panels.rightPanel.appId===n&&a["a"].set(this.state.panels.rightPanel,"appId",i)}}},u=function(e,t){return{namespaced:!0,state:{appId:e,indexName:t,server:"-dsn",displayMode:"list",currentTab:"hits",method:"search"},mutations:{setPanelConfig:function(e,t){a["a"].set(e,"appId",t.appId),a["a"].set(e,"indexName",t.indexName),a["a"].set(e,"server","-dsn"),e.indexName&&a["a"].set(this.state.apps[t.appId],"lastIndexName",e.indexName)},setMethod:function(e,t){a["a"].set(e,"method",t)},setServer:function(e,t){a["a"].set(e,"server",t)},setDisplayMode:function(e,t){a["a"].set(e,"displayMode",t)},setCurrentTab:function(e,t){a["a"].set(e,"currentTab",t)}}}},p={namespaced:!0,modules:{leftPanel:u(null,null),rightPanel:u(null,null)},state:{splitMode:!1,query:"",twoInputs:!1,displayRankingInfo:!1,showSearchableAttributes:!0,showCustomRanking:!0,showAttributesForFaceting:!0,showOnlyMatchingAttributes:!1,comparePanels:!1,manageAppsPanel:!0,expandLeftPanel:!1,analyseMaxNbPoints:100,shareStatePanel:!1,trackedObjects:[]},mutations:{setTrackedObjects:function(e,t){a["a"].set(e,"trackedObjects",t)},setTwoInputs:function(e,t){a["a"].set(e,"twoInputs",t)},replacePanels:function(e,t){Object.keys(t).forEach((function(n){void 0!==e[n]&&a["a"].set(e,n,t[n])}))},setShareStatePanel:function(e,t){a["a"].set(e,"shareStatePanel",t)},setExpandLeftPanel:function(e,t){a["a"].set(e,"expandLeftPanel",t)},setManageAppsPanel:function(e,t){a["a"].set(e,"manageAppsPanel",t)},setAnalyseMaxNbPoints:function(e,t){a["a"].set(e,"analyseMaxNbPoints",t)},setComparePanels:function(e,t){a["a"].set(e,"comparePanels",t)},setDisplayRankingInfo:function(e,t){a["a"].set(e,"displayRankingInfo",t)},setShowSearchableAttributes:function(e,t){a["a"].set(e,"showSearchableAttributes",t)},setShowCustomRanking:function(e,t){a["a"].set(e,"showCustomRanking",t)},setShowAttributesForFaceting:function(e,t){a["a"].set(e,"showAttributesForFaceting",t)},setShowOnlyMatchingAttributes:function(e,t){a["a"].set(e,"showOnlyMatchingAttributes",t)},rightFromLeft:function(e){a["a"].set(e.rightPanel,"appId",e.leftPanel.appId),a["a"].set(e.rightPanel,"indexName",e.leftPanel.indexName),a["a"].set(this.state.apps[e.rightPanel.appId],"lastIndexName",e.rightPanel.indexName)},leftFromRight:function(e){a["a"].set(e.leftPanel,"appId",e.rightPanel.appId),a["a"].set(e.leftPanel,"indexName",e.rightPanel.indexName),a["a"].set(this.state.apps[e.leftPanel.appId],"lastIndexName",e.leftPanel.indexName)},setQuery:function(e,t){a["a"].set(e,"query",t)},setSplitMode:function(e,t){a["a"].set(e,"splitMode",t)},jumpParams:function(e,t){var n=t.configKey,r="rightPanel"===t.panelKey?"leftPanel":"rightPanel",s=e[t.panelKey].appId,i=e[t.panelKey].indexName,l=e[r].appId,c=e[r].indexName,o=this.state.apps[s][i][n];"searchParams2"===n?n="searchParams":"searchParams"===n&&s===l&&i===c&&(n="searchParams2");var u=this.state.apps[l][c];Object.keys(o).forEach((function(e){-1===["replicas"].indexOf(e)&&a["a"].set(u[n],e,JSON.parse(JSON.stringify(o[e])))}))},clearParams:function(e,t){var n=t.configKey,r=e[t.panelKey].appId,s=e[t.panelKey].indexName,i=this.state.apps[r][s];a["a"].set(i,n,{})},jumpParamValue:function(e,t){var n=t.configKey,r="rightPanel"===t.panelKey?"leftPanel":"rightPanel",s=e[t.panelKey].appId,i=e[t.panelKey].indexName,l=e[r].appId,c=e[r].indexName,o=this.state.apps[s][i][n];"searchParams2"===n?n="searchParams":"searchParams"===n&&s===l&&i===c&&(n="searchParams2");var u=this.state.apps[l][c][n];a["a"].set(u,t.inputKey,JSON.parse(JSON.stringify(o[t.inputKey])))}}},d={namespaced:!0,state:{appId:null,indexName:null,server:null,logsType:null},mutations:{setAppId:function(e,t){a["a"].set(e,"appId",t)},setIndexName:function(e,t){a["a"].set(e,"indexName",t)},setServer:function(e,t){a["a"].set(e,"server",t)},setLogsType:function(e,t){a["a"].set(e,"logsType",t)}}},f={namespaced:!0,state:{leftAppId:null,leftIndexName:null,rightAppId:null,rightIndexName:null,currentTab:"settings"},mutations:{setLeftAppId:function(e,t){a["a"].set(e,"leftAppId",t)},setLeftIndexName:function(e,t){a["a"].set(e,"leftIndexName",t)},setRightAppId:function(e,t){a["a"].set(e,"rightAppId",t)},setRightIndexName:function(e,t){a["a"].set(e,"rightIndexName",t)},setCurrentTab:function(e,t){a["a"].set(e,"currentTab",t)}}},h={namespaced:!0,state:{appId:null,indexName:null},mutations:{setAppId:function(e,t){a["a"].set(e,"appId",t)},setIndexName:function(e,t){a["a"].set(e,"indexName",t)}}},m={namespaced:!0,state:{appId:null},mutations:{setAppId:function(e,t){a["a"].set(e,"appId",t)}}},g={namespaced:!0,state:{filtering:"all"},mutations:{setFiltering:function(e,t){a["a"].set(e,"filtering",t)}}},b={namespaced:!0,state:{appId:null,indexName:null,tab:"click"},mutations:{setAppId:function(e,t){a["a"].set(e,"appId",t)},setIndexName:function(e,t){a["a"].set(e,"indexName",t)},setTab:function(e,t){a["a"].set(e,"tab",t)}}},v=(n("e125"),n("ce72")),_=n("c24d");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(v["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=new Date;w.setDate(w.getDate()-7);var I=function(e){var t=e.panels,n=(t.leftPanel,t.rightPanel,t.shareStatePanel,t.manageAppsPanel,Object(_["a"])(t,["leftPanel","rightPanel","shareStatePanel","manageAppsPanel"]));return Object.keys(e).reduce((function(t,a){var r;return x({},t,(r={},Object(v["a"])(r,a,e[a]),Object(v["a"])(r,"panels",x({leftPanel:e.panels.leftPanel,rightPanel:e.panels.rightPanel},n)),Object(v["a"])(r,"apps",Object.keys(e.apps).reduce((function(t,n){var a=e.apps[n],r=a.key,s=a.lastIndexName,i=a.userId,l=a.__app_name,c=a.__app_owner,o=Object(_["a"])(a,["key","lastIndexName","userId","__app_name","__app_owner"]);return x({},t,Object(v["a"])({},n,Object.keys(o).reduce((function(t,a){var r=e.apps[n][a],s=(r.indexSettings,r.refIndexSettings,r.advancedIndexSettings,r.keysIndexer,r.indexAnalyzer,r.autoTitleAttributeName,Object(_["a"])(r,["indexSettings","refIndexSettings","advancedIndexSettings","keysIndexer","indexAnalyzer","autoTitleAttributeName"])),i=(new Date).getTime(),l=s.lastUsed||w.getTime(),c=Math.floor((i-l)/1e3/3600/24);return c>=7?t:x({},t,Object(v["a"])({},a,s))}),{key:r,lastIndexName:s,userId:i,__app_name:l,__app_owner:c})))}),{})),r))}),{})};a["a"].use(r["a"]);var P=new r["a"].Store({modules:{apps:o,panels:p,apilogs:d,indexdiffer:f,relevancetesting:g,indexmanager:m,insightsui:b,indexanalyzer:h},plugins:[i({reducer:I})]}),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("internal-app",[n("div",{staticClass:"min-h-screen"},[n("app-header",{attrs:{"app-name":"Infra Watch"}}),n("div",{staticClass:"max-w-960 mx-auto mt-24 pb-48"},[n("div",{staticClass:"bg-white rounded border border-proton-grey-opacity-60"},[n("div",{staticClass:"flex border-b border-proton-grey text-xs uppercase tracking-wide bg-proton-grey-opacity-40 text-telluric-blue"},[n("div",{staticClass:"mx-8 p-8",class:"inspect"===e.currentTab?"-mb-2 border-b-2 border-nebula-blue-opacity-80":"cursor-pointer",on:{click:function(t){e.currentTab="inspect"}}},[e._v("\n                        Inspect\n                    ")]),n("div",{staticClass:"mx-8 p-8",class:"mlocks"===e.currentTab?"-mb-2 border-b-2 border-nebula-blue-opacity-80":"cursor-pointer",on:{click:function(t){e.currentTab="mlocks"}}},[e._v("\n                        Mlocks alerts "),Object.keys(e.failing).length>1?n("span",[e._v("("+e._s(Object.keys(e.failing).length-1)+")")]):e._e()]),n("div",{staticClass:"mx-8 p-8",class:"busted"===e.currentTab?"-mb-2 border-b-2 border-nebula-blue-opacity-80":"cursor-pointer",on:{click:function(t){e.currentTab="busted"}}},[e._v("\n                        Busted "),e.busted.length>0?n("span",[e._v("("+e._s(e.busted.length)+")")]):e._e()]),n("div",{staticClass:"mx-8 p-8",class:"wrongPlans"===e.currentTab?"-mb-2 border-b-2 border-nebula-blue-opacity-80":"cursor-pointer",on:{click:function(t){e.currentTab="wrongPlans"}}},[e._v("\n                        Wrong plans "),e.wrongPlans.length>0?n("span",[e._v("("+e._s(e.wrongPlans.length)+")")]):e._e()])]),n("div",{staticClass:"p-24"},["inspect"===e.currentTab?n("inspect"):e._e(),"mlocks"===e.currentTab?n("mlocks",{attrs:{failing:e.failing,recovered:e.recovered}}):e._e(),"busted"===e.currentTab?n("app-list",{attrs:{list:e.busted}}):e._e(),"wrongPlans"===e.currentTab?n("app-list",{attrs:{list:e.wrongPlans}}):e._e()],1)])])],1)])},k=[],N=(n("0d9c"),n("632c"),n("0572"),n("4f72"),n("f49d"),n("c880"),n("df26"),n("c8ff")),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bg-moon-grey text-base font-sans-alt min-h-screen",attrs:{id:"app"}},[n("algolia-proxy",{attrs:{enabled:e.isProduction||!0}},[e._t("default",null,{slot:"loggedIn"}),n("div",{staticClass:"h-screen flex justify-center items-center",attrs:{slot:"loggedOut"},slot:"loggedOut"},[n("div",{staticClass:"flex flex-col justify-center items-center"},[n("loader-icon",{staticClass:"w-48 h-48 infinte-rotate"}),n("div",{staticClass:"mt-20"},[e._v("\n                    Connecting to your Algolia account\n                ")])],1)]),n("div",{attrs:{slot:"unauthorized"},slot:"unauthorized"},[e._v("\n            This an internal algolia app.\n        ")])],2)],1)},S=[],A={functional:!0,render(e,t){const{_c:n,_v:a,data:r,children:s=[]}=t,{class:i,staticClass:l,style:c,staticStyle:o,attrs:u={},...p}=r;return n("svg",{class:["feather feather-loader",i,l],style:[c,o],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-loader"},u),...p},s.concat([n("path",{attrs:{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"}})]))}},C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[!e.authorized||e.enabled&&!e.currentUser?e.authorized?e._t("loggedOut"):e._t("unauthorized"):e._t("loggedIn")],2)},T=[],M={name:"AlgoliaProxy",props:["enabled"],data:function(){return{currentUser:null,authorized:!0,paused:!1}},created:function(){var e=this;this.connect(),this.$root.$on("onShouldPauseProxy",(function(){e.paused=!0})),this.$root.$on("onShouldResumeProxy",(function(){e.paused=!0})),window.addEventListener("focus",(function(){e.paused||e.connect()}))},methods:{connect:function(){var e=Object(N["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:return t=Object({NODE_ENV:"production",BASE_URL:"/infra-watch/"}).VUE_APP_METAPARAMS_BACKEND_ENDPOINT||"https://tools-backend.algolia.com",e.next=5,fetch("".concat(t,"/user/info?redirect_to=").concat(window.location.href),{credentials:"include",headers:{"Content-Type":"application/json"}});case 5:return n=e.sent,e.next=8,n.json();case 8:if(a=e.sent,a.error&&"not_authorized"===a.error&&(this.authorized=!1),!a.redirect_url){e.next=13;break}return window.location.href=a.redirect_url,e.abrupt("return");case 13:this.currentUser=a;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},E=M,R=n("2be6"),L=Object(R["a"])(E,C,T,!1,null,null,null),K=L.exports,z=!0,U={name:"InternalApp",components:{AlgoliaProxy:K,LoaderIcon:A},data:function(){return{isProduction:z}}},D=U,F=Object(R["a"])(D,j,S,!1,null,null,null),W=F.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"flex flex-col justify-center w-full bg-white z-10 border-b border-solid border-proton-grey-opacity-80",staticStyle:{height:"94px"}},[n("div",{staticClass:"flex px-16 py-12"},[n("div",{staticClass:"flex w-full"},[n("div",{staticClass:"flex items-center text-telluric-blue mr-16 text-lg"},[n("algolia-logo-experimental",{staticClass:"w-20 h-20 mr-8"}),e._m(0),e.appName?n("chevron-left",{staticClass:"w-12 h-12 rotate-180 mr-4"}):e._e(),e.appName?n("div",{staticClass:"mt-2 font-bold"},[e._v(e._s(e.appName))]):e._e()],1),e._t("default")],2)])])])},B=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mr-4 mt-2"},[n("a",{attrs:{href:"/apps"}},[e._v("Tools")])])}],$={functional:!0,render(e,t){const{_c:n,_v:a,data:r,children:s=[]}=t,{class:i,staticClass:l,style:c,staticStyle:o,attrs:u={},...p}=r;return n("svg",{class:[i,l],style:[c,o],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 120 120"},u),...p},s.concat([n("path",{attrs:{fill:"#ffbb1f",d:"M104.2 0H15.8C7.1 0 0 7 0 15.8v88.4c0 8.7 7.1 15.8 15.8 15.8h88.4c8.7 0 15.8-7.1 15.8-15.8V15.8C120 7.1 112.9 0 104.2 0z"}}),n("path",{attrs:{fill:"#FFF",d:"M30.3 41.9c.1 0 .1 0 0 0 1.3-1.7 2.6-3.3 4.1-4.7 1.5-1.5 3-2.8 4.7-4 .3-.2.4-.7.2-1 0 0 0-.1-.1-.1L37.1 30c-2-2-5.3-2-7.4 0l-2.5 2.5c-2 2-2 5.3 0 7.3l2 2c.4.4.8.4 1.1.1zM50.7 27.6h.2c3.4-1 7-1.5 10.6-1.5 3.4 0 6.9.5 10.2 1.4.4.1.8-.1.8-.5v-4.3c0-2.9-2.3-5.2-5.2-5.2H55.2c-2.9 0-5.2 2.3-5.2 5.2v4.2c-.1.4.3.7.7.7zM61.4 30.3c-18.7 0-33.9 15.2-33.9 33.9s15.2 33.9 33.9 33.9 33.9-15.2 33.9-33.9-15.2-33.9-33.9-33.9zm0 57.8c-13.2-.1-23.9-10.8-23.8-24 0-13.2 10.8-23.9 23.9-23.8 13.2 0 23.9 10.8 23.8 23.9 0 13.2-10.7 23.9-23.9 23.9z"}}),n("path",{attrs:{fill:"#FFF",d:"M62.1 44.5c-.4 0-.7.3-.7.7V63c0 .4.3.7.7.7.1 0 .2 0 .3-.1l15.8-8.2c.4-.2.5-.6.3-1-3.4-5.9-9.6-9.7-16.4-9.9z"}})]))}},J={functional:!0,render(e,t){const{_c:n,_v:a,data:r,children:s=[]}=t,{class:i,staticClass:l,style:c,staticStyle:o,attrs:u={},...p}=r;return n("svg",{class:[i,l],style:[c,o],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},u),...p},s.concat([n("path",{attrs:{d:"M15 18l-6-6 6-6"}})]))}},H={name:"AppHeader",props:["appName"],components:{AlgoliaLogoExperimental:$,ChevronLeft:J}},V=H,G=Object(R["a"])(V,q,B,!1,null,null,null),X=G.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isEmpty?n("div",{staticClass:"p-8 text-center text-cosmos-black-opacity-70"},[e._v("\n        No problem\n    ")]):[n("failing-group",{attrs:{infras:e.failing,"group-name":"Failing"}}),n("failing-group",{staticClass:"mt-24",attrs:{infras:e.recovered,"group-name":"Recovered"}})]],2)},Q=[],Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return Object.keys(e.infras).length>1?n("div",[n("h2",{staticClass:"text-solstice-blue-opacity-80"},[e._v("\n        "+e._s(e.groupName)+"\n    ")]),e._l(e.infras.__keys__,(function(t){return[n("infra",{attrs:{infra:e.infras[t]}})]}))],2):e._e()},ee=[],te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hit mt-24 pb-12 border-b border-proton-grey-opacity-40"},[n("div",{staticClass:"flex"},[n("div",{staticClass:"w-third"},[e._l(e.shortcuts(e.infra),(function(t){var a=t[0],r=t[1];return n("div",[r.length>1?n("div",{staticClass:"flex"},[n("span",{staticClass:"w-80 mr-8 px-4 py-2 rounded text-center"},[e._v("\n                            "+e._s(a)+"\n                        ")]),n("a",{staticClass:"text-nebula-blue cursor-pointer hover:underline py-2",attrs:{href:e.generateWaveFrontLink(r),target:"_blank"}},[e._v("\n                        Wavefront\n                    ")])]):e._e()])})),e._l(["clusters","dsns"],(function(t,a){return n("div",{class:{"mt-12":a>0}},e._l(e.infra[t],(function(a){return e.infra[t].length>0?n("div",{staticClass:"flex"},[n("div",{staticClass:"w-80 mr-8 px-4 py-2 rounded text-center",class:{"bg-mars-1-opacity-40":e.infra.failingMachines.includes(a)},domProps:{innerHTML:e._s(a)}}),n("a",{staticClass:"text-nebula-blue cursor-pointer hover:underline py-2",attrs:{href:e.generateWaveFrontLink([a]),target:"_blank"}},[e._v("Wavefront")]),n("a",{staticClass:"ml-12 text-nebula-blue cursor-pointer hover:underline py-2",attrs:{href:e.generateInfraBookingLink(a),target:"_blank"}},[e._v("\n                        InfraBooking\n                    ")])]):e._e()})),0)}))],2),n("div",{staticClass:"flex-grow"},[n("table",{staticClass:"w-full"},[e._l(e.infra.users,(function(t,a){return[n("tr",{class:{"border-t border-proton-grey-opacity-40":Object.keys(e.infra.users)[0]!==a}},[n("td",{staticClass:"w-50p align-top",class:{"py-8":Object.keys(e.infra.users)[0]!==a,"pb-8":Object.keys(e.infra.users)[0]===a}},[n("div",{domProps:{innerHTML:e._s(t.company)}}),n("div",{domProps:{innerHTML:e._s(t.email)}})]),n("td",{staticClass:"w-50p align-top",class:{"py-8":Object.keys(e.infra.users)[0]!==a,"pb-8":Object.keys(e.infra.users)[0]===a}},[e._l(t.apps,(function(t,a){return[n("div",{staticClass:"flex"},[n("div",{staticClass:"w-half"},[n("a",{staticClass:"hit link text-nebula-blue cursor-pointer hover:underline",attrs:{href:t.adminUrl,target:"_blank"},domProps:{innerHTML:e._s(t.appId)}})]),n("div",{staticClass:"w-half"},[t.appName?n("span",{domProps:{innerHTML:e._s(t.appName)}}):e._e()])])]}))],2)])]}))],2)])])])},ne=[],ae=(n("ae66"),{name:"Infra",props:["infra"],methods:{generateWaveFrontLink:function(e){var t=e.map((function(e){return e.replace(/<\/?em>/g,"")})),n=t.shift();return"https://metrics.wavefront.com/dashboards/cluster-analysis#_v01(p:(cluster:(l:'Cluster%20regex',v:'".concat(n,"-*").concat(t.map((function(e){return"%20or%20source=".concat(e,"-*")})).join(""),"'),cluster-name:").concat(n,"))")},generateInfraBookingLink:function(e){return"https://infrabooking.algolia.com/infra/clusters?query=".concat(e.replace(/<\/?em>/g,""))},shortcuts:function(e){var t=[];return e.allMachines.length>1&&t.push(["all",e.allMachines]),e.clusters.length>1&&e.clusters<e.allMachines&&t.push(["clusters",e.clusters]),e.dsns.length>1&&e.clusters<e.allMachines&&t.push(["DSNs",e.dsns]),e.failingMachines.length>1&&t.push(["all failing",e.failingMachines]),t}}}),re=ae,se=Object(R["a"])(re,te,ne,!1,null,null,null),ie=se.exports,le={name:"FailingGroup",components:{Infra:ie},props:["infras","groupName"]},ce=le,oe=Object(R["a"])(ce,Z,ee,!1,null,null,null),ue=oe.exports,pe={name:"Mlocks",props:["failing","recovered"],components:{FailingGroup:ue},computed:{isEmpty:function(){return 0===Object.keys(this.failing).length&&0===Object.keys(this.recovered).length}}},de=pe,fe=Object(R["a"])(de,Y,Q,!1,null,null,null),he=fe.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"w-full table-fixed"},e._l(e.list,(function(t){return n("tr",[n("td",{staticClass:"truncate px-12"},[e._v(e._s(t.name))]),n("td",{staticClass:"truncate px-12"},[e._v(e._s(t.email))]),n("td",{staticClass:"truncate "},[e._v("\n            "+e._s(t.appName)+"\n        ")]),n("td",{staticClass:"truncate px-12"},[n("a",{staticClass:"truncate text-nebula-blue cursor-pointer hover:underline",attrs:{href:t.adminUrl,target:"_blank"}},[e._v("\n                "+e._s(t.appId)+"\n            ")])]),n("td",{staticClass:"truncate px-12"},[e._v(e._s(t.cluster))]),n("td",{staticClass:"truncate px-12"},[e._v(e._s(t.planName))])])})),0)},ge=[],be={name:"AppList",props:["list"]},ve=be,_e=Object(R["a"])(ve,me,ge,!1,null,null,null),ye=_e.exports,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"flex items-center pl-16 bg-white rounded border border-proton-grey-opacity-80 h-40"},[n("search-icon",{staticClass:"block w-16 h-16 mr-16 text-telluric-blue fill-current"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"search",staticClass:"flex-1 block h-full bg-transparent text-telluric-blue leading-normal",attrs:{placeholder:"Search customer name, appId, server"},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}})],1),e.query.length>0?n("div",[e._l(e.infras.__keys__,(function(t){return[n("infra",{attrs:{infra:e.infras[t]}})]}))],2):e._e()])},we=[],Ie=(n("06ef"),n("08b3"),n("9ebc")),Pe=n.n(Ie);function Oe(){return ke.apply(this,arguments)}function ke(){return ke=Object(N["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object({NODE_ENV:"production",BASE_URL:"/infra-watch/"}).VUE_APP_METAPARAMS_BACKEND_ENDPOINT||"https://tools-backend.algolia.com",e.next=3,fetch("".concat(t,"/applications-search-key"),{credentials:"include",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a.key);case 8:case"end":return e.stop()}}),e)}))),ke.apply(this,arguments)}var Ne={functional:!0,render(e,t){const{_c:n,_v:a,data:r,children:s=[]}=t,{class:i,staticClass:l,style:c,staticStyle:o,attrs:u={},...p}=r;return n("svg",{class:[i,l],style:[c,o],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},u),...p},s.concat([n("path",{attrs:{d:"M19.71 18.29L16 14.61A9 9 0 1014.61 16l3.68 3.68a1 1 0 001.42 0 1 1 0 000-1.39zM2 9a7 7 0 1112 4.93A7 7 0 012 9z"}})]))}},je=(n("0e30"),n("e285"),n("4fb0"),null),Se=[],Ae=[];function Ce(){return Te.apply(this,arguments)}function Te(){return Te=Object(N["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===je){e.next=2;break}return e.abrupt("return",je);case 2:return e.next=4,Oe();case 4:return t=e.sent,n=Pe()("X20GSLY1CL",t),je=n.initIndex("applications_production"),e.abrupt("return",je);case 8:case"end":return e.stop()}}),e)}))),Te.apply(this,arguments)}function Me(e){return e.map((function(e){return e[2][0].split("=")[1]})).filter((function(e){return ze(e)||Ue(e)}))}function Ee(e,t){return Re.apply(this,arguments)}function Re(){return Re=Object(N["a"])(regeneratorRuntime.mark((function e(t,n){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},r=t.map(function(){var e=Object(N["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Fe(a,t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=4,Promise.all(r);case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),Re.apply(this,arguments)}function Le(){return Ke.apply(this,arguments)}function Ke(){return Ke=Object(N["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object({NODE_ENV:"production",BASE_URL:"/infra-watch/"}).VUE_APP_METAPARAMS_BACKEND_ENDPOINT||"https://tools-backend.algolia.com",e.next=3,fetch("".concat(t,"/mlock-alerts/last"),{credentials:"include",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,Se=Me(a.failingSeries),Ae=Me(a.recoveredSeries),e.next=11,Ee(Se);case 11:return e.t0=e.sent,e.next=14,Ee(Ae);case 14:return e.t1=e.sent,e.abrupt("return",{failing:e.t0,recovered:e.t1});case 16:case"end":return e.stop()}}),e)}))),Ke.apply(this,arguments)}function ze(e){return e.startsWith("v")||e.startsWith("d")}function Ue(e){return e.startsWith("t")}function De(e){return e.startsWith("c")||e.startsWith("b")||e.startsWith("places")}function Fe(e,t,n){return We.apply(this,arguments)}function We(){return We=Object(N["a"])(regeneratorRuntime.mark((function e(t,n,a){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ce();case 2:return r=e.sent,e.next=5,r.search(a||"",{filters:"deleted:false AND clusters_and_replicas_names:".concat(n),hitsPerPage:20,disableTypoToleranceOnAttributes:["clusters_and_replicas_names"],allowTyposOnNumericTokens:!1,typoTolerance:"min"});case 5:s=e.sent,s.hits.forEach((function(e){var n=e.cluster_name;if(void 0===t.__keys__&&(t.__keys__=[]),t.__keys__.includes(n)||t.__keys__.push(n),void 0===t[n]){var a=[],r=[],s=[],i=[];e.clusters_and_replicas_names.forEach((function(t,n){var l=e._highlightResult.clusters_and_replicas_names[n].value;(ze(t)||De(t)&&0===n||1===e.clusters_and_replicas_names.length)&&(a.push(l),r.push(l)),Ue(t)&&(a.push(l),s.push(l)),Se.includes(t)&&!1===i.includes(t)&&i.push(l)})),t[n]={allMachines:a,clusters:r,dsns:s,failingMachines:i,users:{}}}void 0===t[n].users[e.user_email]&&(t[n].users[e.user_email]={apps:[],company:e.user_company?e._highlightResult.user_company.value:"",email:e._highlightResult.user_email.value});var l=-1!==t[n].users[e.user_email].apps.findIndex((function(t){return e.application_id===t.appId}));l||t[n].users[e.user_email].apps.push({appId:e._highlightResult.application_id.value,appName:e.name?e._highlightResult.name.value:"",adminUrl:"https://admin.algolia.com/admin/users/".concat(e.user_id,"/applications/").concat(e.application_id)})}));case 7:case"end":return e.stop()}}),e)}))),We.apply(this,arguments)}var qe={name:"Inspect",components:{Infra:ie,SearchIcon:Ne},data:function(){return{appIndex:null,userIndex:null,query:"",infras:{},requestNumber:0,requestNumberReceived:0}},watch:{query:function(){this.search()}},created:function(){var e=Object(N["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Oe();case 2:t=e.sent,n=Pe()("X20GSLY1CL",t),this.appIndex=n.initIndex("applications_production"),this.userIndex=n.initIndex("users_production"),this.search();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{search:function(){var e=Object(N["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.requestNumber++,e.next=3,this.appIndex.search(this.query,{page:0,hitsPerPage:100,filters:"deleted:false",disableTypoToleranceOnAttributes:["clusters_and_replicas_names"],allowTyposOnNumericTokens:!1,typoTolerance:"min"});case 3:return n=e.sent,a=n.hits,r=a.map((function(e){return e.cluster_name})),e.next=8,Ee(r,this.query);case 8:if(s=e.sent,!(this.requestNumberReceived>t)){e.next=11;break}return e.abrupt("return");case 11:this.requestNumberReceived=t,this.infras=s;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Be=qe,$e=Object(R["a"])(Be,xe,we,!1,null,null,null),Je=$e.exports,He={name:"Home",components:{Inspect:Je,AppList:ye,Mlocks:he,InternalApp:W,AppHeader:X},data:function(){return{failing:{},recovered:{},currentTab:"inspect",busted:[],wrongPlans:[]}},created:function(){var e=Object(N["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Le().then((function(e){t.failing=e.failing,t.recovered=e.recovered})),this.browseApp();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getAppObject:function(e,t){return{name:e.user_full_name,email:e.user_email,appId:e.application_id,appName:e.name,planName:e.plan_name,cluster:t,adminUrl:"https://admin.algolia.com/admin/users/".concat(e.user_id,"/applications/").concat(e.application_id)}},browseApp:function(){var e=Object(N["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Oe();case 2:return t=e.sent,n=Pe()("X20GSLY1CL",t),a=n.initIndex("applications_production"),r=["business","business_light","enterprise"],e.next=8,a.browseObjects({batch:function(e){e.forEach((function(e){var t=!1,n=!1;if(!0!==e.deleted)for(var a=0;a<e.clusters_and_replicas_names.length;a++){var i=e.clusters_and_replicas_names[a];if(i.startsWith("d")||i.startsWith("v")||i.startsWith("a")){if(!1===r.includes(e.plan_name)&&(n||s.wrongPlans.push(s.getAppObject(e,i)),n=!0),e.user_email.endsWith("@algolia.com")){t||(s.busted.push(s.getAppObject(e,i)),s.busted.sort((function(e,t){return e.name&&t.name&&e.name!==t.name?e.name.localeCompare(t.name):e.cluster.localeCompare(t.cluster)}))),t=!0;break}}else(i.startsWith("c")||i.startsWith("b"))&&r.includes(e.plan_name)&&(n||s.wrongPlans.push(s.getAppObject(e,i)),n=!0)}}))}});case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}},Ve=He,Ge=Object(R["a"])(Ve,O,k,!1,null,null,null),Xe=Ge.exports;a["a"].config.productionTip=!1,a["a"].config.performance=!0,new a["a"]({render:function(e){return e(Xe)},store:P}).$mount("#app")}});
//# sourceMappingURL=app.2ac4791c.js.map