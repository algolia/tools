(function(e){function t(t){for(var n,i,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},s={app:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/mercari/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var p=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("dde3"),a("c8a0"),a("3cdf"),a("5c85");var n=a("9869"),s=a("9ce4"),r=a("5552"),i=function(e,t,a){e=e||{},t=e.storage||window&&window.localStorage,a=e.key||"vuex";var n=500,s=null;function i(e,t,a){try{return(a=t.getItem(e))&&"undefined"!==typeof a?JSON.parse(a):void 0}catch(n){}}function o(t,a,r){window.clearTimeout(s),s=window.setTimeout((function(){var n=a;e.reducer&&(n=e.reducer(a)),r.setItem(t,JSON.stringify(n))}),n)}return function(e){var n=i(a,t);if("object"===Object(r["a"])(n)&&null!==n){var s;for(s in e.state)void 0===n[s]&&(n[s]=e.state[s]);e.replaceState(n)}e.subscribe((function(e,n){o(a,n,t)}))}},o=(a("2e73"),a("0c1f"),function(){return{namespaced:!0,state:{searchParams:{},searchParams2:{},indexSettings:{},advancedIndexSettings:{},refIndexSettings:{},imageAttributeName:null,autoTitleAttributeName:null,titleAttribute:"",ignoreImageProxy:!1,imageSize:40,imageBaseUrl:"",imageSuffixUrl:"",lastUsed:(new Date).getTime()},mutations:{replaceIndexData:function(e,t){Object.keys(t).forEach((function(a){void 0!==e[a]&&n["a"].set(e,a,t[a])}))},updateLastUsed:function(e){e.lastUsed=(new Date).getTime()},replaceIndexSettings:function(e,t){var a=t;n["a"].set(e,"indexSettings",{}),Object.keys(a).forEach((function(t){n["a"].set(e.indexSettings,t,{value:a[t],enabled:!0})})),n["a"].set(e,"refIndexSettings",JSON.parse(JSON.stringify(e.indexSettings)))},setImageSize:function(e,t){n["a"].set(e,"imageSize",t)},setIgnoreImageProxy:function(e,t){n["a"].set(e,"ignoreImageProxy",t)},setAutoTitleAttributeName:function(e,t){n["a"].set(e,"autoTitleAttributeName",t)},setTitleAttribute:function(e,t){n["a"].set(e,"titleAttribute",t)},resetIndexSettings:function(e){n["a"].set(e,"indexSettings",JSON.parse(JSON.stringify(e.refIndexSettings)))},setImageAttributeName:function(e,t){n["a"].set(e,"imageAttributeName",t)},setImageBaseUrl:function(e,t){n["a"].set(e,"imageBaseUrl",t)},setImageSuffixUrl:function(e,t){n["a"].set(e,"imageSuffixUrl",t)},restoreIndexSetting:function(e,t){var a=t.inputKey;n["a"].set(e.indexSettings,a,JSON.parse(JSON.stringify(e.refIndexSettings[a])))},setAdvancedIndexSettings:function(e,t){n["a"].set(e,"advancedIndexSettings",t)},setParamValue:function(e,t){var a=t.configKey||this.state.edit.configKey;n["a"].set(e[a],t.key,{value:t.value,enabled:!0})},setParamEnabled:function(e,t){n["a"].set(e[t.configKey][t.inputKey],"enabled",t.value)},deleteParam:function(e,t){n["a"].delete(e[t.configKey],t.inputKey)},deleteArrayElement:function(e,t){n["a"].delete(e[t.configKey][t.inputKey].value,t.positionKey)},setKeysIndexer:function(e,t){n["a"].set(e,"keysIndexer",t)},setIndexAnalyzer:function(e,t){n["a"].set(e,"indexAnalyzer",t)}}}}),c=function(e,t,a){return{namespaced:!0,state:{key:t,lastIndexName:a,userId:null,__app_name:"",__app_owner:""},mutations:{setLastIndexName:function(e,t){n["a"].set(e,a,t)},setAppName:function(e,t){n["a"].set(e,"__app_name",t)},setAppOwner:function(e,t){n["a"].set(e,"__app_owner",t)},setUserId:function(e,t){n["a"].set(e,"userId",t)},addIndex:function(t,a){var n=a,s=["apps",e,n],r=this._modules.get(s);void 0===r&&(t[n]?this.registerModule(["apps",e,n],o(),{preserveState:!0}):this.registerModule(["apps",e,n],o()),r=this._modules.get(s)),r.context.commit("updateLastUsed")}}}},l={namespaced:!0,modules:{},mutations:{addAppId:function(e,t){var a=t.appId,s=["apps",a],r=this._modules.get(s),i=t.apiKey||null;void 0!==r&&e[a]?t.apiKey&&n["a"].set(e[a],"key",i):(e[a]?this.registerModule(["apps",a],c(a,i),{preserveState:!0}):this.registerModule(["apps",a],c(a,i,null)),null===this.state.panels.leftPanel.appId&&n["a"].set(this.state.panels.leftPanel,"appId",a),null===this.state.panels.rightPanel.appId&&n["a"].set(this.state.panels.rightPanel,"appId",a))},deleteAppId:function(e,t){var a=t,s=["apps",a],r=this._modules.get(s);r&&this.unregisterModule(s),n["a"].delete(e,a);var i=null,o=Object.keys(e);o.length>0&&(i=o[0]),this.state.panels.leftPanel.appId===a&&n["a"].set(this.state.panels.leftPanel,"appId",i),this.state.panels.rightPanel.appId===a&&n["a"].set(this.state.panels.rightPanel,"appId",i)}}},p=function(e,t){return{namespaced:!0,state:{appId:e,indexName:t,server:"-dsn",displayMode:"list",currentTab:"hits",method:"search"},mutations:{setPanelConfig:function(e,t){n["a"].set(e,"appId",t.appId),n["a"].set(e,"indexName",t.indexName),n["a"].set(e,"server","-dsn"),e.indexName&&n["a"].set(this.state.apps[t.appId],"lastIndexName",e.indexName)},setMethod:function(e,t){n["a"].set(e,"method",t)},setServer:function(e,t){n["a"].set(e,"server",t)},setDisplayMode:function(e,t){n["a"].set(e,"displayMode",t)},setCurrentTab:function(e,t){n["a"].set(e,"currentTab",t)}}}},u={namespaced:!0,modules:{leftPanel:p(null,null),rightPanel:p(null,null)},state:{splitMode:!1,query:"",twoInputs:!1,displayRankingInfo:!1,showSearchableAttributes:!0,showCustomRanking:!0,showAttributesForFaceting:!0,showOnlyMatchingAttributes:!1,comparePanels:!1,manageAppsPanel:!0,expandLeftPanel:!1,analyseMaxNbPoints:100,shareStatePanel:!1,trackedObjects:[]},mutations:{setTrackedObjects:function(e,t){n["a"].set(e,"trackedObjects",t)},setTwoInputs:function(e,t){n["a"].set(e,"twoInputs",t)},replacePanels:function(e,t){Object.keys(t).forEach((function(a){void 0!==e[a]&&n["a"].set(e,a,t[a])}))},setShareStatePanel:function(e,t){n["a"].set(e,"shareStatePanel",t)},setExpandLeftPanel:function(e,t){n["a"].set(e,"expandLeftPanel",t)},setManageAppsPanel:function(e,t){n["a"].set(e,"manageAppsPanel",t)},setAnalyseMaxNbPoints:function(e,t){n["a"].set(e,"analyseMaxNbPoints",t)},setComparePanels:function(e,t){n["a"].set(e,"comparePanels",t)},setDisplayRankingInfo:function(e,t){n["a"].set(e,"displayRankingInfo",t)},setShowSearchableAttributes:function(e,t){n["a"].set(e,"showSearchableAttributes",t)},setShowCustomRanking:function(e,t){n["a"].set(e,"showCustomRanking",t)},setShowAttributesForFaceting:function(e,t){n["a"].set(e,"showAttributesForFaceting",t)},setShowOnlyMatchingAttributes:function(e,t){n["a"].set(e,"showOnlyMatchingAttributes",t)},rightFromLeft:function(e){n["a"].set(e.rightPanel,"appId",e.leftPanel.appId),n["a"].set(e.rightPanel,"indexName",e.leftPanel.indexName),n["a"].set(this.state.apps[e.rightPanel.appId],"lastIndexName",e.rightPanel.indexName)},leftFromRight:function(e){n["a"].set(e.leftPanel,"appId",e.rightPanel.appId),n["a"].set(e.leftPanel,"indexName",e.rightPanel.indexName),n["a"].set(this.state.apps[e.leftPanel.appId],"lastIndexName",e.leftPanel.indexName)},setQuery:function(e,t){n["a"].set(e,"query",t)},setSplitMode:function(e,t){n["a"].set(e,"splitMode",t)},jumpParams:function(e,t){var a=t.configKey,s="rightPanel"===t.panelKey?"leftPanel":"rightPanel",r=e[t.panelKey].appId,i=e[t.panelKey].indexName,o=e[s].appId,c=e[s].indexName,l=this.state.apps[r][i][a];"searchParams2"===a?a="searchParams":"searchParams"===a&&r===o&&i===c&&(a="searchParams2");var p=this.state.apps[o][c];Object.keys(l).forEach((function(e){-1===["replicas"].indexOf(e)&&n["a"].set(p[a],e,JSON.parse(JSON.stringify(l[e])))}))},clearParams:function(e,t){var a=t.configKey,s=e[t.panelKey].appId,r=e[t.panelKey].indexName,i=this.state.apps[s][r];n["a"].set(i,a,{})},jumpParamValue:function(e,t){var a=t.configKey,s="rightPanel"===t.panelKey?"leftPanel":"rightPanel",r=e[t.panelKey].appId,i=e[t.panelKey].indexName,o=e[s].appId,c=e[s].indexName,l=this.state.apps[r][i][a];"searchParams2"===a?a="searchParams":"searchParams"===a&&r===o&&i===c&&(a="searchParams2");var p=this.state.apps[o][c][a];n["a"].set(p,t.inputKey,JSON.parse(JSON.stringify(l[t.inputKey])))}}},d={namespaced:!0,state:{appId:null,indexName:null,server:null,logsType:null},mutations:{setAppId:function(e,t){n["a"].set(e,"appId",t)},setIndexName:function(e,t){n["a"].set(e,"indexName",t)},setServer:function(e,t){n["a"].set(e,"server",t)},setLogsType:function(e,t){n["a"].set(e,"logsType",t)}}},f={namespaced:!0,state:{leftAppId:null,leftIndexName:null,rightAppId:null,rightIndexName:null,currentTab:"settings"},mutations:{setLeftAppId:function(e,t){n["a"].set(e,"leftAppId",t)},setLeftIndexName:function(e,t){n["a"].set(e,"leftIndexName",t)},setRightAppId:function(e,t){n["a"].set(e,"rightAppId",t)},setRightIndexName:function(e,t){n["a"].set(e,"rightIndexName",t)},setCurrentTab:function(e,t){n["a"].set(e,"currentTab",t)}}},h={namespaced:!0,state:{appId:null,indexName:null},mutations:{setAppId:function(e,t){n["a"].set(e,"appId",t)},setIndexName:function(e,t){n["a"].set(e,"indexName",t)}}},m={namespaced:!0,state:{appId:null},mutations:{setAppId:function(e,t){n["a"].set(e,"appId",t)}}},g={namespaced:!0,state:{filtering:"all"},mutations:{setFiltering:function(e,t){n["a"].set(e,"filtering",t)}}},v={namespaced:!0,state:{appId:null,indexName:null,tab:"click"},mutations:{setAppId:function(e,t){n["a"].set(e,"appId",t)},setIndexName:function(e,t){n["a"].set(e,"indexName",t)},setTab:function(e,t){n["a"].set(e,"tab",t)}}},y=(a("e125"),a("ce72")),b=a("c24d");function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){Object(y["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w=new Date;w.setDate(w.getDate()-7);var I=function(e){var t=e.panels,a=(t.leftPanel,t.rightPanel,t.shareStatePanel,t.manageAppsPanel,Object(b["a"])(t,["leftPanel","rightPanel","shareStatePanel","manageAppsPanel"]));return Object.keys(e).reduce((function(t,n){var s;return x({},t,(s={},Object(y["a"])(s,n,e[n]),Object(y["a"])(s,"panels",x({leftPanel:e.panels.leftPanel,rightPanel:e.panels.rightPanel},a)),Object(y["a"])(s,"apps",Object.keys(e.apps).reduce((function(t,a){var n=e.apps[a],s=n.key,r=n.lastIndexName,i=n.userId,o=n.__app_name,c=n.__app_owner,l=Object(b["a"])(n,["key","lastIndexName","userId","__app_name","__app_owner"]);return x({},t,Object(y["a"])({},a,Object.keys(l).reduce((function(t,n){var s=e.apps[a][n],r=(s.indexSettings,s.refIndexSettings,s.advancedIndexSettings,s.keysIndexer,s.indexAnalyzer,s.autoTitleAttributeName,Object(b["a"])(s,["indexSettings","refIndexSettings","advancedIndexSettings","keysIndexer","indexAnalyzer","autoTitleAttributeName"])),i=(new Date).getTime(),o=r.lastUsed||w.getTime(),c=Math.floor((i-o)/1e3/3600/24);return c>=7?t:x({},t,Object(y["a"])({},n,r))}),{key:s,lastIndexName:r,userId:i,__app_name:o,__app_owner:c})))}),{})),s))}),{})};n["a"].use(s["a"]);var A=new s["a"].Store({modules:{apps:l,panels:u,apilogs:d,indexdiffer:f,relevancetesting:g,indexmanager:m,insightsui:v,indexanalyzer:h},plugins:[i({reducer:I})]}),C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("internal-app",[a("div",{staticClass:"min-h-screen"},[a("app-header",{attrs:{"app-name":"Mercari"}},[a("display-config",{staticClass:"mx-16 mt-0 ml-auto"})],1),a("app-management"),a("div",{staticClass:"mx-24"},[e.apps.length>0?a("div",{staticClass:"mx-auto m-24 pb-48"},[a("h2",{staticClass:"text-center mb-24"},[e._v("Infra overview: "+e._s(e.config.email))]),a("div",{staticClass:"flex"},[a("div",{staticClass:"bg-white rounded border border-proton-grey-opacity-60 mx-auto"},[a("table",[a("tr",{staticClass:"border-b border-proton-grey-opacity-40"},[a("td",{staticClass:"p-8 align-top"},[e._v("appId")]),e._l(e.apps,(function(t){return a("td",{staticClass:"p-8 align-top"},[e._v("\n                                    "+e._s(t.application_id)+"\n                                ")])}))],2),a("tr",{staticClass:"border-b border-proton-grey-opacity-40"},[a("td",{staticClass:"p-8 align-top"},[e._v("appName")]),e._l(e.apps,(function(t){return a("td",{staticClass:"p-8 align-top"},[e._v("\n                                    "+e._s(t.name)+"\n                                ")])}))],2),a("tr",{staticClass:"border-b border-proton-grey-opacity-40"},[a("td",{staticClass:"p-8 align-top"},[e._v("Infra")]),e._l(e.apps,(function(t){return a("td",{staticClass:"p-8 align-top"},e._l(t.clusters_and_replicas_names,(function(t){return a("div",[e._v(e._s(t))])})),0)}))],2),a("tr",{staticClass:"border-b border-proton-grey-opacity-40"},[a("td",{staticClass:"p-8 align-top"},[e._v("nbIndices")]),e._l(e.apps,(function(t){return a("td",{staticClass:"p-8 align-top"},[t.hasAdminKeyRegistered?a("div",[e._v("\n                                        "+e._s(t.indices.length)+"\n                                        "+e._s(t.indices.length>1?"indices":"index")+"\n                                        -\n                                        "+e._s(e.formatHumanNumber(t.indices.map((function(e){return e.fileSize})).reduce((function(e,t){return e+t}),0),0,["B","KB","MB","GB"],1e3))+"\n                                    ")]):a("div",{},[e._v("unregistered appID")])])}))],2),e._l(e.config.engineConfs,(function(t){return a("tr",{staticClass:"border-b border-proton-grey-opacity-40"},[a("td",{staticClass:"p-8 align-top w-1    "},[e._v(e._s(t))]),e._l(e.apps,(function(n){return a("td",{staticClass:"p-8 align-top"},[e._v("\n                                    "+e._s(JSON.stringify(n.engine_configuration[t]))+"\n                                ")])}))],2)}))],2)])]),e._l(e.appsWithAdminKey,(function(t){return a("div",{staticClass:"mt-24"},[a("h2",{staticClass:"text-center mb-24"},[e._v("Indices: "+e._s(t.application_id)+" - "+e._s(t.name))]),a("div",{staticClass:"flex"},[a("div",{staticClass:"bg-white rounded border border-proton-grey-opacity-60 mx-auto"},[a("table",[a("tr",{staticClass:"border-b border-proton-grey-opacity-40"},[a("td",{staticClass:"p-8 align-top"},[e._v("Name")]),a("td",{staticClass:"p-8 align-top"},[e._v("nbRecords")]),a("td",{staticClass:"p-8 align-top"},[e._v("dataSize")]),a("td",{staticClass:"p-8 align-top"},[e._v("fileSize")]),a("td",{staticClass:"p-8 align-top"},[e._v("nbShards")])]),e._l(t.indices,(function(t){return a("tr",{staticClass:"border-b border-proton-grey-opacity-40"},[a("td",{staticClass:"p-8 align-top"},[e._v(e._s(t.name))]),a("td",{staticClass:"p-8 align-top"},[e._v(e._s(e.formatHumanNumber(t.entries)))]),a("td",{staticClass:"p-8 align-top"},[e._v(e._s(e.formatHumanNumber(t.dataSize,0,["B","KB","MB","GB"],1e3)))]),a("td",{staticClass:"p-8 align-top"},[e._v(e._s(e.formatHumanNumber(t.fileSize,0,["B","KB","MB","GB"],1e3)))]),a("td",{staticClass:"p-8 align-top"},[e._v(e._s(t.nbShards))])])}))],2)])])])}))],2):e._e()])],1)])},k=[],P=(a("c880"),a("4f72"),a("0d9c"),a("632c"),a("06ef"),a("df26"),a("c8ff")),O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg-moon-grey text-base font-sans-alt min-h-screen",attrs:{id:"app"}},[a("algolia-proxy",{attrs:{enabled:e.isProduction||!0}},[e._t("default",null,{slot:"loggedIn"}),a("div",{staticClass:"h-screen flex justify-center items-center",attrs:{slot:"loggedOut"},slot:"loggedOut"},[a("div",{staticClass:"flex flex-col justify-center items-center"},[a("loader-icon",{staticClass:"w-48 h-48 infinte-rotate"}),a("div",{staticClass:"mt-20"},[e._v("\n                    Connecting to your Algolia account\n                ")])],1)]),a("div",{attrs:{slot:"unauthorized"},slot:"unauthorized"},[e._v("\n            This an internal algolia app.\n        ")])],2)],1)},S=[],j={functional:!0,render(e,t){const{_c:a,_v:n,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:p={},...u}=s;return a("svg",{class:["feather feather-loader",i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-loader"},p),...u},r.concat([a("path",{attrs:{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"}})]))}},M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[!e.authorized||e.enabled&&!e.currentUser?e.authorized?e._t("loggedOut"):e._t("unauthorized"):e._t("loggedIn")],2)},N=[],K={name:"AlgoliaProxy",props:["enabled"],data:function(){return{currentUser:null,authorized:!0,paused:!1}},created:function(){var e=this;this.connect(),this.$root.$on("onShouldPauseProxy",(function(){e.paused=!0})),this.$root.$on("onShouldResumeProxy",(function(){e.paused=!0})),window.addEventListener("focus",(function(){e.paused||e.connect()}))},methods:{connect:function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:return t="https://tools-backend.build",e.next=5,fetch("".concat(t,"/user/info?redirect_to=").concat(window.location.href),{credentials:"include",headers:{"Content-Type":"application/json"}});case 5:return a=e.sent,e.next=8,a.json();case 8:if(n=e.sent,n.error&&"not_authorized"===n.error&&(this.authorized=!1),!n.redirect_url){e.next=13;break}return window.location.href=n.redirect_url,e.abrupt("return");case 13:this.currentUser=n;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},z=K,T=a("2be6"),R=Object(T["a"])(z,M,N,!1,null,null,null),$=R.exports,B=!0,E={name:"InternalApp",components:{AlgoliaProxy:$,LoaderIcon:j},data:function(){return{isProduction:B}}},D=E,L=Object(T["a"])(D,O,S,!1,null,null,null),F=L.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"flex flex-col justify-center w-full bg-white z-10 border-b border-solid border-proton-grey-opacity-80",staticStyle:{height:"94px"}},[a("div",{staticClass:"flex px-16 py-12"},[a("div",{staticClass:"flex w-full"},[a("div",{staticClass:"flex items-center text-telluric-blue mr-16 text-lg"},[a("algolia-logo-experimental",{staticClass:"w-20 h-20 mr-8"}),e._m(0),e.appName?a("chevron-left",{staticClass:"w-12 h-12 rotate-180 mr-4"}):e._e(),e.appName?a("div",{staticClass:"mt-2 font-bold"},[e._v(e._s(e.appName))]):e._e()],1),e._t("default")],2)])])])},V=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mr-4 mt-2"},[a("a",{attrs:{href:"/apps"}},[e._v("Tools")])])}],J={functional:!0,render(e,t){const{_c:a,_v:n,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:p={},...u}=s;return a("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 120 120"},p),...u},r.concat([a("path",{attrs:{fill:"#ffbb1f",d:"M104.2 0H15.8C7.1 0 0 7 0 15.8v88.4c0 8.7 7.1 15.8 15.8 15.8h88.4c8.7 0 15.8-7.1 15.8-15.8V15.8C120 7.1 112.9 0 104.2 0z"}}),a("path",{attrs:{fill:"#FFF",d:"M30.3 41.9c.1 0 .1 0 0 0 1.3-1.7 2.6-3.3 4.1-4.7 1.5-1.5 3-2.8 4.7-4 .3-.2.4-.7.2-1 0 0 0-.1-.1-.1L37.1 30c-2-2-5.3-2-7.4 0l-2.5 2.5c-2 2-2 5.3 0 7.3l2 2c.4.4.8.4 1.1.1zM50.7 27.6h.2c3.4-1 7-1.5 10.6-1.5 3.4 0 6.9.5 10.2 1.4.4.1.8-.1.8-.5v-4.3c0-2.9-2.3-5.2-5.2-5.2H55.2c-2.9 0-5.2 2.3-5.2 5.2v4.2c-.1.4.3.7.7.7zM61.4 30.3c-18.7 0-33.9 15.2-33.9 33.9s15.2 33.9 33.9 33.9 33.9-15.2 33.9-33.9-15.2-33.9-33.9-33.9zm0 57.8c-13.2-.1-23.9-10.8-23.8-24 0-13.2 10.8-23.9 23.9-23.8 13.2 0 23.9 10.8 23.8 23.9 0 13.2-10.7 23.9-23.9 23.9z"}}),a("path",{attrs:{fill:"#FFF",d:"M62.1 44.5c-.4 0-.7.3-.7.7V63c0 .4.3.7.7.7.1 0 .2 0 .3-.1l15.8-8.2c.4-.2.5-.6.3-1-3.4-5.9-9.6-9.7-16.4-9.9z"}})]))}},U={functional:!0,render(e,t){const{_c:a,_v:n,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:p={},...u}=s;return a("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},p),...u},r.concat([a("path",{attrs:{d:"M15 18l-6-6 6-6"}})]))}},q={name:"AppHeader",props:["appName"],components:{AlgoliaLogoExperimental:J,ChevronLeft:U}},G=q,Y=Object(T["a"])(G,H,V,!1,null,null,null),W=Y.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.$store.state.panels.manageAppsPanel||Object.keys(e.$store.state.apps).length<=0?a("div",{staticClass:"flex"},[a("div",{staticClass:"rounded bg-white m-16 mr-64 border border-solid border-proton-grey-opacity-60"},[a("div",{staticClass:"text-telluric-blue text-xs uppercase tracking-wide flex items-center border-b border-t-0 border-proton-grey bg-white p-8 bg-proton-grey-opacity-80"},[a("div",[e._v("Manage AppIDs")]),a("close-icon",{staticClass:"cursor-pointer ml-auto w-12 h-12",on:{click:function(t){return e.$store.commit("panels/setManageAppsPanel",!1)}}})],1),a("div",[a("div",{staticClass:"text-nova-grey bg-moon-grey-opacity-50 border border-proton-grey-opacity-20 m-8 p-8"},[e._v("\n                To function this app requires Algolia credentials. You must provide the Admin API Key for every feature to work properly.\n            ")]),a("table",[e._m(0),e._l(e.apps,(function(t,n){return a("tr",[a("td",{staticClass:"p-8"},[e._v(e._s(n))]),a("td",{staticClass:"p-8"},[t.key?a("span",[e._v("\n                            "+e._s(t.key.substring(0,4)+t.key.substring(4).replace(/./g,"*"))+"\n                        ")]):e._e()]),a("td",{staticClass:"p-8"},[e._v(e._s(t.__app_name))]),a("td",{staticClass:"p-8"},[e._v(e._s(t.__app_owner))]),a("td",{staticClass:"p-8"},[a("trash-icon",{staticClass:"w-12 h-12 cursor-pointer",on:{click:function(t){return e.deleteApp(n)}}})],1)])})),a("tr",[a("td",{staticClass:"p-8 pt-32"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newAppId,expression:"newAppId"}],staticClass:"w-full bg-proton-grey-opacity-20 p-4",attrs:{placeholder:"appId"},domProps:{value:e.newAppId},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addAppId(t)},input:function(t){t.target.composing||(e.newAppId=t.target.value)}}})]),a("td",{staticClass:"p-8 pt-32"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newApiKey,expression:"newApiKey"}],staticClass:"w-full bg-proton-grey-opacity-20 p-4",attrs:{placeholder:"apiKey"},domProps:{value:e.newApiKey},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addAppId(t)},input:function(t){t.target.composing||(e.newApiKey=t.target.value)}}})]),a("td",{staticClass:"p-8 pt-32"},[a("button",{on:{click:e.addAppId}},[e._v("Add")])])])],2)])])]):e._e()},X=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",{staticClass:"text-left"},[a("th",{staticClass:"p-8 text-xs uppercase tracking-wide font-normal"},[e._v("App ID")]),a("th",{staticClass:"p-8 text-xs uppercase tracking-wide font-normal"},[e._v("API Key")]),a("th",{staticClass:"p-8 text-xs uppercase tracking-wide font-normal"},[e._v("App name")]),a("th",{staticClass:"p-8 text-xs uppercase tracking-wide font-normal"},[e._v("App owner")]),a("th",{staticClass:"p-8 text-xs uppercase tracking-wide font-normal"})])}],Z={functional:!0,render(e,t){const{_c:a,_v:n,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:p={},...u}=s;return a("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},p),...u},r.concat([a("path",{attrs:{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"}})]))}},ee={functional:!0,render(e,t){const{_c:a,_v:n,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:p={},...u}=s;return a("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},p),...u},r.concat([a("path",{attrs:{d:"M18 6L6 18M6 6l12 12"}})]))}},te={name:"AppManagement",components:{TrashIcon:Z,CloseIcon:ee},data:function(){return{newAppId:"",newApiKey:""}},created:function(){var e=this;this.appIds.length>0&&!this.apps[this.appIds[0]].__app_owner&&this.fetchAppsInfo(),this.$root.$on("onFetchAppsInfo",(function(){return e.fetchAppsInfo()}))},computed:{apps:function(){return this.$store.state.apps},appIds:function(){return Object.keys(this.apps)}},methods:{addAppId:function(){this.newAppId.length>0&&this.newApiKey.length>0&&(this.$store.commit("apps/addAppId",{appId:this.newAppId,apiKey:this.newApiKey}),this.newAppId="",this.newApiKey="",this.fetchAppsInfo())},deleteApp:function(e){this.$store.commit("apps/deleteAppId",e)},fetchAppsInfo:function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(){var t,a,n,s,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object.keys(this.apps),a="https://tools-backend.build",e.next=4,fetch("".concat(a,"/apps/").concat(t.join(",")),{credentials:"include",headers:{"Content-Type":"application/json"}});case 4:return n=e.sent,e.next=7,n.json();case 7:s=e.sent,s.forEach((function(e){r.$store.commit("apps/addAppId",{appId:e.application_id,apiKey:r.apps[e.application_id].key}),r.$store.commit("apps/".concat(e.application_id,"/setAppName"),e.name),r.$store.commit("apps/".concat(e.application_id,"/setAppOwner"),e.user.email)}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},ae=te,ne=Object(T["a"])(ae,Q,X,!1,null,null,null),se=ne.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"flex text-telluric-blue text-sm"},[a("div",{class:Object.keys(e.$store.state.apps).length>0?"ml-48":"ml-auto"},[e._m(0),a("div",{staticClass:"flex h-48"},[a("div",{staticClass:"h-full flex items-center text-center block bg-white rounded border border-b-0 border-proton-grey-opacity-40 shadow-sm hover:shadow transition-fast-out mr-16"},[a("button",{staticClass:"h-full py-8 px-16",on:{click:function(t){e.manageAppsPanel=!e.manageAppsPanel}}},[a("div",[a("box-icon",{staticClass:"w-auto h-16 fill-current",class:[e.manageAppsPanel?"text-nebula-blue":"text-cosmos-black-opacity-60"]})],1),a("div",{staticClass:"mt-4"},[e._v("\n                            Manage AppIDs\n                        ")])])])])])])])},ie=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mb-8"},[a("h4",[e._v("Management")])])}],oe={functional:!0,render(e,t){const{_c:a,_v:n,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:p={},...u}=s;return a("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 29.94 20"},p),...u},r.concat([a("path",{attrs:{d:"M6.94 1H3a3 3 0 00-3 3v12a3 3 0 003 3h3.94a3 3 0 003-3V4a3 3 0 00-3-3zm1 15a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1h3.94a1 1 0 011 1zM26.94 1H23a3 3 0 00-3 3v12a3 3 0 003 3h3.94a3 3 0 003-3V4a3 3 0 00-3-3zm1 15a1 1 0 01-1 1H23a1 1 0 01-1-1V4a1 1 0 011-1h3.94a1 1 0 011 1zM15 2.4a1 1 0 01-1-1V1a1 1 0 012 0v.4a1 1 0 01-1 1zM15 15.86a1 1 0 01-1-1v-.75a1 1 0 012 0v.75a1 1 0 01-1 1zm0-4.49a1 1 0 01-1-1v-.74a1 1 0 012 0v.74a1 1 0 01-1 1zm0-4.48a1 1 0 01-1-1v-.75a1 1 0 112 0v.75a1 1 0 01-1 1zM15 20a1 1 0 01-1-1v-.4a1 1 0 012 0v.4a1 1 0 01-1 1z"}})]))}},ce={functional:!0,render(e,t){const{_c:a,_v:n,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:p={},...u}=s;return a("svg",{class:["feather feather-sliders",i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-sliders"},p),...u},r.concat([a("path",{attrs:{d:"M4 21v-7M4 10V3M12 21v-9M12 8V3M20 21v-5M20 12V3M1 14h6M9 8h6M17 16h6"}})]))}},le={functional:!0,render(e,t){const{_c:a,_v:n,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:p={},...u}=s;return a("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},p),...u},r.concat([a("circle",{attrs:{cx:"4",cy:"4",r:"3",fill:"transparent"}}),a("circle",{attrs:{cx:"20",cy:"4",r:"3",fill:"transparent"}}),a("circle",{attrs:{cx:"4",cy:"20",r:"3",fill:"transparent"}}),a("circle",{attrs:{cx:"20",cy:"20",r:"3",fill:"transparent"}}),a("path",{attrs:{d:"M8 4h8M8 20h8"}})]))}},pe={functional:!0,render(e,t){const{_c:a,_v:n,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:p={},...u}=s;return a("svg",{class:["feather feather-eye",i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye"},p),...u},r.concat([a("path",{attrs:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}}),a("circle",{attrs:{cx:"12",cy:"12",r:"3"}})]))}},ue={functional:!0,render(e,t){const{_c:a,_v:n,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:p={},...u}=s;return a("svg",{class:["feather feather-eye-off",i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye-off"},p),...u},r.concat([a("path",{attrs:{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24M1 1l22 22"}})]))}},de={functional:!0,render(e,t){const{_c:a,_v:n,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:p={},...u}=s;return a("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 23.53"},p),...u},r.concat([a("path",{attrs:{d:"M20.34 4.31l-8-4a3.07 3.07 0 00-2.68 0l-8 4A3 3 0 000 7v9.51a3 3 0 001.65 2.7l8 4a3 3 0 002.69 0l8-4A3 3 0 0022 16.53V7a3 3 0 00-1.66-2.69zM10.56 2.1A1 1 0 0111 2a1 1 0 01.44.1l7.32 3.66L11 9.64 3.24 5.76zm-8 15.32a1 1 0 01-.55-.9V7.37l8 4v9.78zm16.89 0L12 21.14v-9.77l8-4v9.16a1 1 0 01-.56.89z"}})]))}},fe={functional:!0,render(e,t){const{_c:a,_v:n,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:p={},...u}=s;return a("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},p),...u},r.concat([a("circle",{attrs:{cx:"18",cy:"5",r:"3"}}),a("circle",{attrs:{cx:"6",cy:"12",r:"3"}}),a("circle",{attrs:{cx:"18",cy:"19",r:"3"}}),a("path",{attrs:{d:"M8.59 13.51l6.83 3.98M15.41 6.51l-6.82 3.98"}})]))}},he={name:"DisplayConfig",components:{SplitIcon:oe,Slider:ce,CompareIcon:le,EyeIcon:pe,EyeOffIcon:ue,BoxIcon:de,ShareIcon:fe},computed:{manageAppsPanel:{get:function(){return this.$store.state.panels.manageAppsPanel},set:function(e){this.$store.commit("panels/setManageAppsPanel",e)}}}},me=he,ge=Object(T["a"])(me,re,ie,!1,null,null,null),ve=ge.exports,ye=(a("08b3"),a("9ebc")),be=a.n(ye);function _e(){return xe.apply(this,arguments)}function xe(){return xe=Object(P["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="https://tools-backend.build",e.next=3,fetch("".concat(t,"/applications-search-key"),{credentials:"include",headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n.key);case 8:case"end":return e.stop()}}),e)}))),xe.apply(this,arguments)}a("f49d"),a("a7e1"),a("4fb0"),a("ae66");function we(e,t,a,n){if(0===e)return"0";a=a||["","K","M","B","T"],n=n||1e3,t=t||0;var s=Math.min(Math.max(0,Math.floor(Math.log(Math.abs(e))/Math.log(n))),a.length-1),r=e/Math.pow(n,s);return(Math.abs(r)>1e3?Ie(r,t):r.toFixed(t))+a[s]}function Ie(e,t){return"number"!==typeof e?e:(e||0).toFixed(t).replace(/\B(?=(\d{3})+(?!\d))/g,",")}var Ae={name:"Home",components:{AppManagement:se,DisplayConfig:ve,InternalApp:F,AppHeader:W},data:function(){return{apps:[],formatHumanNumber:we,config:{email:"etdev@mercari.com",ignoreAppIds:["6102AREHZ4"],engineConfs:["nb_dedicated_indexing_threads","max_nb_indexing_thread","max_nb_query_threads","query_timeout_ms","degraded_query_timeout","not_enough_hits_query_timeout_ms","max_nb_hits_for_not_enough_hits_timeout","force_mlock_after_build","force_merge_at_gmt","max_small_gen_size_mb","min_big_gen_size_mb","mlock"]}}},created:function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getApps();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{appsWithAdminKey:function(){return this.apps.filter((function(e){return e.hasAdminKeyRegistered}))}},methods:{adminAPIKey:function(e){return this.$store.state.apps[e]?this.$store.state.apps[e].key:null},getAppsDashboardInfo:function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="https://tools-backend.build",e.next=3,fetch("".concat(a,"/apps/").concat(t.map((function(e){return e.application_id})).join(",")),{credentials:"include",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getApps:function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(){var t,a,n,s,r,i,o,c,l,p=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_e();case 2:return t=e.sent,a=be()("X20GSLY1CL",t),n=a.initIndex("applications_production"),e.next=7,n.search("",{facetFilters:["user_email:".concat(this.config.email)]});case 7:return s=e.sent,r=this.config.ignoreAppIds||[],i=s.hits.filter((function(e){return!e.deleted&&!r.includes(e.application_id)})).sort((function(e,t){return e.name.localeCompare(t.name)})),e.next=12,this.getAppsDashboardInfo(i);case 12:o=e.sent,c=regeneratorRuntime.mark((function e(t){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i[t].engine_configuration=o[t].current_plan.engine_configuration,a=p.adminAPIKey(i[t].application_id),i[t].hasAdminKeyRegistered=!!a,!a){e.next=10;break}return n=be()(i[t].application_id,a),e.next=7,n.listIndices();case 7:s=e.sent,i[t].indices=s.items.sort((function(e,t){return t.fileSize-e.fileSize})),i[t].indices.map(function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(a,s){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.initIndex(a.name),e.next=3,r.getSettings({queryParameters:{advanced:1}});case 3:o=e.sent,p.$set(i[t].indices[s],"nbShards",o.nbShardsAuto>1?o.nbShardsAuto:o.nbShards||1);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e)})),l=0;case 15:if(!(l<i.length)){e.next=20;break}return e.delegateYield(c(l),"t0",17);case 17:l++,e.next=15;break;case 20:this.apps=i;case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Ce=Ae,ke=Object(T["a"])(Ce,C,k,!1,null,null,null),Pe=ke.exports;n["a"].config.productionTip=!1,n["a"].config.performance=!0,new n["a"]({render:function(e){return e(Pe)},store:A}).$mount("#app")}});
//# sourceMappingURL=app.b0fb2276.js.map