(function(e){function t(t){for(var a,i,o=t[0],c=t[1],l=t[2],u=0,p=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},s={app:0},r=[];function i(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-05d719ac":"7d0f2dc3","chunk-0a995046":"99e28fc8","chunk-2d0a30fb":"2a7a548e","chunk-2d0a40d6":"2a0b02f4","chunk-2d0a4fd8":"81dc81aa","chunk-2d0ab0dc":"d977206a","chunk-2d0ab4a9":"65289708","chunk-2d0ab513":"78079fcb","chunk-2d0abe96":"a034f1a4","chunk-2d0b1d78":"22e6d786","chunk-2d0b2574":"07523864","chunk-2d0bce15":"6f12bb81","chunk-2d0bce36":"b5b434f8","chunk-2d0bd3b6":"dbdd6175","chunk-2d0c20be":"710c8402","chunk-2d0c4da6":"7bf83078","chunk-2d0c55e3":"5fa86f4a","chunk-2d0c7b72":"4e64cf8d","chunk-2d0cbe46":"0dda1652","chunk-2d0ceb19":"3e96f076","chunk-2d0d0b5b":"1487c98e","chunk-2d0d2b05":"dd2c9f49","chunk-2d0d3bfb":"2194ab21","chunk-2d0d6b53":"d20df811","chunk-2d0d800a":"a67b7b38","chunk-2d0da52f":"0a4b5036","chunk-2d0da752":"7b32b30d","chunk-2d0de3fb":"bd1d1f3b","chunk-2d0dea5a":"655d8430","chunk-2d0df1fd":"977a6739","chunk-2d0df875":"c26474d5","chunk-2d0e1b38":"e5ff503b","chunk-2d0e212f":"eb09ae55","chunk-2d0e4aca":"0bafc249","chunk-2d0e6330":"523d30e2","chunk-2d0e8804":"cdabd23d","chunk-2d0e882f":"356a3dd0","chunk-2d0e95fe":"7bb94fc3","chunk-2d0e9772":"bc2b7664","chunk-2d2073c1":"a98ba648","chunk-2d208251":"997132de","chunk-2d20f328":"ffb17918","chunk-2d213345":"b9bd50f0","chunk-2d213a22":"a8eecd13","chunk-2d213a8c":"e0be1bf2","chunk-2d213cc7":"1495ccfe","chunk-2d21643e":"cfba30ea","chunk-2d21a35a":"7c825b1c","chunk-2d21a758":"ea7a248b","chunk-2d21aedf":"8f8e8697","chunk-2d21d122":"24d9b6c1","chunk-2d21d130":"a8c52d45","chunk-2d21e70f":"c2356d41","chunk-2d225dd9":"6f304aaa","chunk-2d2291e4":"33a41f35","chunk-2d22c6c6":"a3432c06","chunk-2d22d075":"3af3350e","chunk-2d22d3e6":"6dee0bf2","chunk-2d22d70a":"1542d28b","chunk-2d230c94":"33c26566","chunk-2d238114":"27cec247","chunk-4301fce8":"399d59da","chunk-772f41b1":"9cb179a2","chunk-b1e1f7c0":"919303b9"}[e]+".js"}function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=s[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=s[e]=[t,a]}));t.push(n[2]=a);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=i(e);var l=new Error;r=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=s[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}s[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/transform/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("dde3"),n("c8a0"),n("3cdf"),n("5c85");var a=n("9869"),s=n("9ce4"),r=n("5552"),i=function(e,t,n){e=e||{},t=e.storage||window&&window.localStorage,n=e.key||"vuex";var a=500,s=null;function i(e,t,n){try{return(n=t.getItem(e))&&"undefined"!==typeof n?JSON.parse(n):void 0}catch(a){}}function o(t,n,r){window.clearTimeout(s),s=window.setTimeout((function(){var a=n;e.reducer&&(a=e.reducer(n)),r.setItem(t,JSON.stringify(a))}),a)}return function(e){var a=i(n,t);if("object"===Object(r["a"])(a)&&null!==a){var s;for(s in e.state)void 0===a[s]&&(a[s]=e.state[s]);e.replaceState(a)}e.subscribe((function(e,a){o(n,a,t)}))}},o=(n("2e73"),n("0c1f"),function(){return{namespaced:!0,state:{searchParams:{},searchParams2:{},indexSettings:{},advancedIndexSettings:{},refIndexSettings:{},imageAttributeName:null,autoTitleAttributeName:null,titleAttribute:"",ignoreImageProxy:!1,imageSize:40,imageBaseUrl:"",imageSuffixUrl:"",lastUsed:(new Date).getTime()},mutations:{replaceIndexData:function(e,t){Object.keys(t).forEach((function(n){void 0!==e[n]&&a["a"].set(e,n,t[n])}))},updateLastUsed:function(e){e.lastUsed=(new Date).getTime()},replaceIndexSettings:function(e,t){var n=t;a["a"].set(e,"indexSettings",{}),Object.keys(n).forEach((function(t){a["a"].set(e.indexSettings,t,{value:n[t],enabled:!0})})),a["a"].set(e,"refIndexSettings",JSON.parse(JSON.stringify(e.indexSettings)))},setImageSize:function(e,t){a["a"].set(e,"imageSize",t)},setIgnoreImageProxy:function(e,t){a["a"].set(e,"ignoreImageProxy",t)},setAutoTitleAttributeName:function(e,t){a["a"].set(e,"autoTitleAttributeName",t)},setTitleAttribute:function(e,t){a["a"].set(e,"titleAttribute",t)},resetIndexSettings:function(e){a["a"].set(e,"indexSettings",JSON.parse(JSON.stringify(e.refIndexSettings)))},setImageAttributeName:function(e,t){a["a"].set(e,"imageAttributeName",t)},setImageBaseUrl:function(e,t){a["a"].set(e,"imageBaseUrl",t)},setImageSuffixUrl:function(e,t){a["a"].set(e,"imageSuffixUrl",t)},restoreIndexSetting:function(e,t){var n=t.inputKey;a["a"].set(e.indexSettings,n,JSON.parse(JSON.stringify(e.refIndexSettings[n])))},setAdvancedIndexSettings:function(e,t){a["a"].set(e,"advancedIndexSettings",t)},setParamValue:function(e,t){var n=t.configKey||this.state.edit.configKey;a["a"].set(e[n],t.key,{value:t.value,enabled:!0})},setParamEnabled:function(e,t){a["a"].set(e[t.configKey][t.inputKey],"enabled",t.value)},deleteParam:function(e,t){a["a"].delete(e[t.configKey],t.inputKey)},deleteArrayElement:function(e,t){a["a"].delete(e[t.configKey][t.inputKey].value,t.positionKey)},setKeysIndexer:function(e,t){a["a"].set(e,"keysIndexer",t)},setIndexAnalyzer:function(e,t){a["a"].set(e,"indexAnalyzer",t)}}}}),c=function(e,t,n){return{namespaced:!0,state:{key:t,lastIndexName:n,userId:null,__app_name:"",__app_owner:""},mutations:{setLastIndexName:function(e,t){a["a"].set(e,n,t)},setAppName:function(e,t){a["a"].set(e,"__app_name",t)},setAppOwner:function(e,t){a["a"].set(e,"__app_owner",t)},setUserId:function(e,t){a["a"].set(e,"userId",t)},addIndex:function(t,n){var a=n,s=["apps",e,a],r=this._modules.get(s);void 0===r&&(t[a]?this.registerModule(["apps",e,a],o(),{preserveState:!0}):this.registerModule(["apps",e,a],o()),r=this._modules.get(s)),r.context.commit("updateLastUsed")}}}},l={namespaced:!0,modules:{},mutations:{addAppId:function(e,t){var n=t.appId,s=["apps",n],r=this._modules.get(s),i=t.apiKey||null;void 0!==r&&e[n]?t.apiKey&&a["a"].set(e[n],"key",i):(e[n]?this.registerModule(["apps",n],c(n,i),{preserveState:!0}):this.registerModule(["apps",n],c(n,i,null)),null===this.state.panels.leftPanel.appId&&a["a"].set(this.state.panels.leftPanel,"appId",n),null===this.state.panels.rightPanel.appId&&a["a"].set(this.state.panels.rightPanel,"appId",n))},deleteAppId:function(e,t){var n=t,s=["apps",n],r=this._modules.get(s);r&&this.unregisterModule(s),a["a"].delete(e,n);var i=null,o=Object.keys(e);o.length>0&&(i=o[0]),this.state.panels.leftPanel.appId===n&&a["a"].set(this.state.panels.leftPanel,"appId",i),this.state.panels.rightPanel.appId===n&&a["a"].set(this.state.panels.rightPanel,"appId",i)}}},u=function(e,t){return{namespaced:!0,state:{appId:e,indexName:t,server:"-dsn",displayMode:"list",currentTab:"hits",method:"search"},mutations:{setPanelConfig:function(e,t){a["a"].set(e,"appId",t.appId),a["a"].set(e,"indexName",t.indexName),a["a"].set(e,"server","-dsn"),e.indexName&&a["a"].set(this.state.apps[t.appId],"lastIndexName",e.indexName)},setMethod:function(e,t){a["a"].set(e,"method",t)},setServer:function(e,t){a["a"].set(e,"server",t)},setDisplayMode:function(e,t){a["a"].set(e,"displayMode",t)},setCurrentTab:function(e,t){a["a"].set(e,"currentTab",t)}}}},d={namespaced:!0,modules:{leftPanel:u(null,null),rightPanel:u(null,null)},state:{splitMode:!1,query:"",twoInputs:!1,displayRankingInfo:!1,showSearchableAttributes:!0,showCustomRanking:!0,showAttributesForFaceting:!0,showOnlyMatchingAttributes:!1,comparePanels:!1,manageAppsPanel:!0,expandLeftPanel:!1,analyseMaxNbPoints:100,shareStatePanel:!1,trackedObjects:[]},mutations:{setTrackedObjects:function(e,t){a["a"].set(e,"trackedObjects",t)},setTwoInputs:function(e,t){a["a"].set(e,"twoInputs",t)},replacePanels:function(e,t){Object.keys(t).forEach((function(n){void 0!==e[n]&&a["a"].set(e,n,t[n])}))},setShareStatePanel:function(e,t){a["a"].set(e,"shareStatePanel",t)},setExpandLeftPanel:function(e,t){a["a"].set(e,"expandLeftPanel",t)},setManageAppsPanel:function(e,t){a["a"].set(e,"manageAppsPanel",t)},setAnalyseMaxNbPoints:function(e,t){a["a"].set(e,"analyseMaxNbPoints",t)},setComparePanels:function(e,t){a["a"].set(e,"comparePanels",t)},setDisplayRankingInfo:function(e,t){a["a"].set(e,"displayRankingInfo",t)},setShowSearchableAttributes:function(e,t){a["a"].set(e,"showSearchableAttributes",t)},setShowCustomRanking:function(e,t){a["a"].set(e,"showCustomRanking",t)},setShowAttributesForFaceting:function(e,t){a["a"].set(e,"showAttributesForFaceting",t)},setShowOnlyMatchingAttributes:function(e,t){a["a"].set(e,"showOnlyMatchingAttributes",t)},rightFromLeft:function(e){a["a"].set(e.rightPanel,"appId",e.leftPanel.appId),a["a"].set(e.rightPanel,"indexName",e.leftPanel.indexName),a["a"].set(this.state.apps[e.rightPanel.appId],"lastIndexName",e.rightPanel.indexName)},leftFromRight:function(e){a["a"].set(e.leftPanel,"appId",e.rightPanel.appId),a["a"].set(e.leftPanel,"indexName",e.rightPanel.indexName),a["a"].set(this.state.apps[e.leftPanel.appId],"lastIndexName",e.leftPanel.indexName)},setQuery:function(e,t){a["a"].set(e,"query",t)},setSplitMode:function(e,t){a["a"].set(e,"splitMode",t)},jumpParams:function(e,t){var n=t.configKey,s="rightPanel"===t.panelKey?"leftPanel":"rightPanel",r=e[t.panelKey].appId,i=e[t.panelKey].indexName,o=e[s].appId,c=e[s].indexName,l=this.state.apps[r][i][n];"searchParams2"===n?n="searchParams":"searchParams"===n&&r===o&&i===c&&(n="searchParams2");var u=this.state.apps[o][c];Object.keys(l).forEach((function(e){-1===["replicas"].indexOf(e)&&a["a"].set(u[n],e,JSON.parse(JSON.stringify(l[e])))}))},clearParams:function(e,t){var n=t.configKey,s=e[t.panelKey].appId,r=e[t.panelKey].indexName,i=this.state.apps[s][r];a["a"].set(i,n,{})},jumpParamValue:function(e,t){var n=t.configKey,s="rightPanel"===t.panelKey?"leftPanel":"rightPanel",r=e[t.panelKey].appId,i=e[t.panelKey].indexName,o=e[s].appId,c=e[s].indexName,l=this.state.apps[r][i][n];"searchParams2"===n?n="searchParams":"searchParams"===n&&r===o&&i===c&&(n="searchParams2");var u=this.state.apps[o][c][n];a["a"].set(u,t.inputKey,JSON.parse(JSON.stringify(l[t.inputKey])))}}},p={namespaced:!0,state:{appId:null,indexName:null,server:null,logsType:null},mutations:{setAppId:function(e,t){a["a"].set(e,"appId",t)},setIndexName:function(e,t){a["a"].set(e,"indexName",t)},setServer:function(e,t){a["a"].set(e,"server",t)},setLogsType:function(e,t){a["a"].set(e,"logsType",t)}}},h={namespaced:!0,state:{leftAppId:null,leftIndexName:null,rightAppId:null,rightIndexName:null,currentTab:"settings"},mutations:{setLeftAppId:function(e,t){a["a"].set(e,"leftAppId",t)},setLeftIndexName:function(e,t){a["a"].set(e,"leftIndexName",t)},setRightAppId:function(e,t){a["a"].set(e,"rightAppId",t)},setRightIndexName:function(e,t){a["a"].set(e,"rightIndexName",t)},setCurrentTab:function(e,t){a["a"].set(e,"currentTab",t)}}},f={namespaced:!0,state:{appId:null,indexName:null},mutations:{setAppId:function(e,t){a["a"].set(e,"appId",t)},setIndexName:function(e,t){a["a"].set(e,"indexName",t)}}},m={namespaced:!0,state:{appId:null},mutations:{setAppId:function(e,t){a["a"].set(e,"appId",t)}}},v={namespaced:!0,state:{filtering:"all"},mutations:{setFiltering:function(e,t){a["a"].set(e,"filtering",t)}}},g={namespaced:!0,state:{appId:null,indexName:null,tab:"click"},mutations:{setAppId:function(e,t){a["a"].set(e,"appId",t)},setIndexName:function(e,t){a["a"].set(e,"indexName",t)},setTab:function(e,t){a["a"].set(e,"tab",t)}}},b=(n("e125"),n("ce72")),x=n("c24d");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(b["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=new Date;_.setDate(_.getDate()-7);var k=function(e){var t=e.panels,n=(t.leftPanel,t.rightPanel,t.shareStatePanel,t.manageAppsPanel,Object(x["a"])(t,["leftPanel","rightPanel","shareStatePanel","manageAppsPanel"]));return Object.keys(e).reduce((function(t,a){var s;return w({},t,(s={},Object(b["a"])(s,a,e[a]),Object(b["a"])(s,"panels",w({leftPanel:e.panels.leftPanel,rightPanel:e.panels.rightPanel},n)),Object(b["a"])(s,"apps",Object.keys(e.apps).reduce((function(t,n){var a=e.apps[n],s=a.key,r=a.lastIndexName,i=a.userId,o=a.__app_name,c=a.__app_owner,l=Object(x["a"])(a,["key","lastIndexName","userId","__app_name","__app_owner"]);return w({},t,Object(b["a"])({},n,Object.keys(l).reduce((function(t,a){var s=e.apps[n][a],r=(s.indexSettings,s.refIndexSettings,s.advancedIndexSettings,s.keysIndexer,s.indexAnalyzer,s.autoTitleAttributeName,Object(x["a"])(s,["indexSettings","refIndexSettings","advancedIndexSettings","keysIndexer","indexAnalyzer","autoTitleAttributeName"])),i=(new Date).getTime(),o=r.lastUsed||_.getTime(),c=Math.floor((i-o)/1e3/3600/24);return c>=7?t:w({},t,Object(b["a"])({},a,r))}),{key:s,lastIndexName:r,userId:i,__app_name:o,__app_owner:c})))}),{})),s))}),{})};a["a"].use(s["a"]);var I=new s["a"].Store({modules:{apps:l,panels:d,apilogs:p,indexdiffer:h,relevancetesting:v,indexmanager:m,insightsui:g,indexanalyzer:f},plugins:[i({reducer:k})]}),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("internal-app",[n("div",{staticClass:"min-h-screen pb-48"},[n("app-header",{attrs:{"app-name":"Transform"}},[n("display-config",{staticClass:"mx-16 mt-0 ml-auto"})],1),n("div",{staticClass:"px-48 mt-24"},[n("app-management"),n("dataset-selector",{on:{onUpdateDataset:function(t){e.dataset=t},onUpdateIndexInfo:function(t){e.indexInfo=t},onUpdateCsvFile:function(t){e.csvFile=t},onUpdateJsonFile:function(t){e.jsonFile=t},onUpdateXmlFile:function(t){e.xmlFile=t},onUpdateXmlRootNode:function(t){e.xmlRootNode=t}}}),e.dataset?n("transformer",{attrs:{dataset:e.dataset},on:{onUpdateTransformer:function(t){e.transformer=t}}}):e._e(),e.dataset&&e.transformer?n("applier",{attrs:{dataset:e.dataset,"index-info":e.indexInfo,transformer:e.transformer,"csv-file":e.csvFile,"json-file":e.jsonFile,"xml-file":e.xmlFile,"xml-root-node":e.xmlRootNode}}):e._e()],1)],1)])},j=[],A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bg-moon-grey text-base font-sans-alt min-h-screen",attrs:{id:"app"}},[n("algolia-proxy",{attrs:{enabled:e.isProduction||!0}},[e._t("default",null,{slot:"loggedIn"}),n("div",{staticClass:"h-screen flex justify-center items-center",attrs:{slot:"loggedOut"},slot:"loggedOut"},[n("div",{staticClass:"flex flex-col justify-center items-center"},[n("loader-icon",{staticClass:"w-48 h-48 infinte-rotate"}),n("div",{staticClass:"mt-20"},[e._v("\n                    Connecting to your Algolia account\n                ")])],1)]),n("div",{attrs:{slot:"unauthorized"},slot:"unauthorized"},[e._v("\n            This an internal algolia app.\n        ")])],2)],1)},C=[],P={functional:!0,render(e,t){const{_c:n,_v:a,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=s;return n("svg",{class:["feather feather-loader",i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-loader"},u),...d},r.concat([n("path",{attrs:{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"}})]))}},N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[!e.authorized||e.enabled&&!e.currentUser?e.authorized?e._t("loggedOut"):e._t("unauthorized"):e._t("loggedIn")],2)},S=[],T=(n("df26"),n("c8ff")),E={name:"AlgoliaProxy",props:["enabled"],data:function(){return{currentUser:null,authorized:!0,paused:!1}},created:function(){var e=this;this.connect(),this.$root.$on("onShouldPauseProxy",(function(){e.paused=!0})),this.$root.$on("onShouldResumeProxy",(function(){e.paused=!0})),window.addEventListener("focus",(function(){e.paused||e.connect()}))},methods:{connect:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:return t=Object({NODE_ENV:"production",BASE_URL:"/transform/"}).VUE_APP_METAPARAMS_BACKEND_ENDPOINT||"https://tools-backend.algolia.com",e.next=5,fetch("".concat(t,"/user/info?redirect_to=").concat(window.location.href),{credentials:"include",headers:{"Content-Type":"application/json"}});case 5:return n=e.sent,e.next=8,n.json();case 8:if(a=e.sent,a.error&&"not_authorized"===a.error&&(this.authorized=!1),!a.redirect_url){e.next=13;break}return window.location.href=a.redirect_url,e.abrupt("return");case 13:this.currentUser=a;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},R=E,F=n("2be6"),D=Object(F["a"])(R,N,S,!1,null,null,null),M=D.exports,$=!0,L={name:"InternalApp",components:{AlgoliaProxy:M,LoaderIcon:P},data:function(){return{isProduction:$}}},K=L,U=Object(F["a"])(K,A,C,!1,null,null,null),B=U.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"flex flex-col justify-center w-full bg-white z-10 border-b border-solid border-proton-grey-opacity-80",staticStyle:{height:"94px"}},[n("div",{staticClass:"flex px-16 py-12"},[n("div",{staticClass:"flex w-full"},[n("div",{staticClass:"flex items-center text-telluric-blue mr-16 text-lg"},[n("algolia-logo-experimental",{staticClass:"w-20 h-20 mr-8"}),e._m(0),e.appName?n("chevron-left",{staticClass:"w-12 h-12 rotate-180 mr-4"}):e._e(),e.appName?n("div",{staticClass:"mt-2 font-bold"},[e._v(e._s(e.appName))]):e._e()],1),e._t("default")],2)])])])},z=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mr-4 mt-2"},[n("a",{attrs:{href:"/apps"}},[e._v("Tools")])])}],q={functional:!0,render(e,t){const{_c:n,_v:a,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=s;return n("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 120 120"},u),...d},r.concat([n("path",{attrs:{fill:"#ffbb1f",d:"M104.2 0H15.8C7.1 0 0 7 0 15.8v88.4c0 8.7 7.1 15.8 15.8 15.8h88.4c8.7 0 15.8-7.1 15.8-15.8V15.8C120 7.1 112.9 0 104.2 0z"}}),n("path",{attrs:{fill:"#FFF",d:"M30.3 41.9c.1 0 .1 0 0 0 1.3-1.7 2.6-3.3 4.1-4.7 1.5-1.5 3-2.8 4.7-4 .3-.2.4-.7.2-1 0 0 0-.1-.1-.1L37.1 30c-2-2-5.3-2-7.4 0l-2.5 2.5c-2 2-2 5.3 0 7.3l2 2c.4.4.8.4 1.1.1zM50.7 27.6h.2c3.4-1 7-1.5 10.6-1.5 3.4 0 6.9.5 10.2 1.4.4.1.8-.1.8-.5v-4.3c0-2.9-2.3-5.2-5.2-5.2H55.2c-2.9 0-5.2 2.3-5.2 5.2v4.2c-.1.4.3.7.7.7zM61.4 30.3c-18.7 0-33.9 15.2-33.9 33.9s15.2 33.9 33.9 33.9 33.9-15.2 33.9-33.9-15.2-33.9-33.9-33.9zm0 57.8c-13.2-.1-23.9-10.8-23.8-24 0-13.2 10.8-23.9 23.9-23.8 13.2 0 23.9 10.8 23.8 23.9 0 13.2-10.7 23.9-23.9 23.9z"}}),n("path",{attrs:{fill:"#FFF",d:"M62.1 44.5c-.4 0-.7.3-.7.7V63c0 .4.3.7.7.7.1 0 .2 0 .3-.1l15.8-8.2c.4-.2.5-.6.3-1-3.4-5.9-9.6-9.7-16.4-9.9z"}})]))}},J={functional:!0,render(e,t){const{_c:n,_v:a,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=s;return n("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},u),...d},r.concat([n("path",{attrs:{d:"M15 18l-6-6 6-6"}})]))}},H={name:"AppHeader",props:["appName"],components:{AlgoliaLogoExperimental:q,ChevronLeft:J}},G=H,W=Object(F["a"])(G,V,z,!1,null,null,null),X=W.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$store.state.panels.manageAppsPanel||Object.keys(e.$store.state.apps).length<=0?n("div",{staticClass:"flex"},[n("div",{staticClass:"rounded bg-white m-16 mr-64 border border-solid border-proton-grey-opacity-60"},[n("div",{staticClass:"text-telluric-blue text-xs uppercase tracking-wide flex items-center border-b border-t-0 border-proton-grey bg-white p-8 bg-proton-grey-opacity-80"},[n("div",[e._v("Manage AppIDs")]),n("close-icon",{staticClass:"cursor-pointer ml-auto w-12 h-12",on:{click:function(t){return e.$store.commit("panels/setManageAppsPanel",!1)}}})],1),n("div",[n("div",{staticClass:"text-nova-grey bg-moon-grey-opacity-50 border border-proton-grey-opacity-20 m-8 p-8"},[e._v("\n                To function this app requires Algolia credentials. You must provide the Admin API Key for every feature to work properly.\n            ")]),n("table",[e._m(0),e._l(e.apps,(function(t,a){return n("tr",[n("td",{staticClass:"p-8"},[e._v(e._s(a))]),n("td",{staticClass:"p-8"},[t.key?n("span",[e._v("\n                            "+e._s(t.key.substring(0,4)+t.key.substring(4).replace(/./g,"*"))+"\n                        ")]):e._e()]),n("td",{staticClass:"p-8"},[e._v(e._s(t.__app_name))]),n("td",{staticClass:"p-8"},[e._v(e._s(t.__app_owner))]),n("td",{staticClass:"p-8"},[n("trash-icon",{staticClass:"w-12 h-12 cursor-pointer",on:{click:function(t){return e.deleteApp(a)}}})],1)])})),n("tr",[n("td",{staticClass:"p-8 pt-32"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newAppId,expression:"newAppId"}],staticClass:"w-full bg-proton-grey-opacity-20 p-4",attrs:{placeholder:"appId"},domProps:{value:e.newAppId},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addAppId(t)},input:function(t){t.target.composing||(e.newAppId=t.target.value)}}})]),n("td",{staticClass:"p-8 pt-32"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newApiKey,expression:"newApiKey"}],staticClass:"w-full bg-proton-grey-opacity-20 p-4",attrs:{placeholder:"apiKey"},domProps:{value:e.newApiKey},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addAppId(t)},input:function(t){t.target.composing||(e.newApiKey=t.target.value)}}})]),n("td",{staticClass:"p-8 pt-32"},[n("button",{on:{click:e.addAppId}},[e._v("Add")])])])],2)])])]):e._e()},Y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{staticClass:"text-left"},[n("th",{staticClass:"p-8 text-xs uppercase tracking-wide font-normal"},[e._v("App ID")]),n("th",{staticClass:"p-8 text-xs uppercase tracking-wide font-normal"},[e._v("API Key")]),n("th",{staticClass:"p-8 text-xs uppercase tracking-wide font-normal"},[e._v("App name")]),n("th",{staticClass:"p-8 text-xs uppercase tracking-wide font-normal"},[e._v("App owner")]),n("th",{staticClass:"p-8 text-xs uppercase tracking-wide font-normal"})])}],Z=(n("c880"),{functional:!0,render(e,t){const{_c:n,_v:a,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=s;return n("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},u),...d},r.concat([n("path",{attrs:{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"}})]))}}),ee={functional:!0,render(e,t){const{_c:n,_v:a,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=s;return n("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},u),...d},r.concat([n("path",{attrs:{d:"M18 6L6 18M6 6l12 12"}})]))}},te={name:"AppManagement",components:{TrashIcon:Z,CloseIcon:ee},data:function(){return{newAppId:"",newApiKey:""}},created:function(){var e=this;this.appIds.length>0&&!this.apps[this.appIds[0]].__app_owner&&this.fetchAppsInfo(),this.$root.$on("onFetchAppsInfo",(function(){return e.fetchAppsInfo()}))},computed:{apps:function(){return this.$store.state.apps},appIds:function(){return Object.keys(this.apps)}},methods:{addAppId:function(){this.newAppId.length>0&&this.newApiKey.length>0&&(this.$store.commit("apps/addAppId",{appId:this.newAppId,apiKey:this.newApiKey}),this.newAppId="",this.newApiKey="",this.fetchAppsInfo())},deleteApp:function(e){this.$store.commit("apps/deleteAppId",e)},fetchAppsInfo:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var t,n,a,s,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object.keys(this.apps),n=Object({NODE_ENV:"production",BASE_URL:"/transform/"}).VUE_APP_METAPARAMS_BACKEND_ENDPOINT||"https://tools-backend.algolia.com",e.next=4,fetch("".concat(n,"/apps/").concat(t.join(",")),{credentials:"include",headers:{"Content-Type":"application/json"}});case 4:return a=e.sent,e.next=7,a.json();case 7:s=e.sent,s.forEach((function(e){r.$store.commit("apps/addAppId",{appId:e.application_id,apiKey:r.apps[e.application_id].key}),r.$store.commit("apps/".concat(e.application_id,"/setAppName"),e.name),r.$store.commit("apps/".concat(e.application_id,"/setAppOwner"),e.user.email)}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},ne=te,ae=Object(F["a"])(ne,Q,Y,!1,null,null,null),se=ae.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",{staticClass:"text-solstice-blue-opacity-80"},[e._v("Extract")]),n("div",{staticClass:"flex mt-24"},[n("div",{staticClass:"w-232 cursor-pointer mr-24 text-center rounded border border-proton-grey-opacity-60 p-24",class:"index"===e.type?"bg-proton-grey-opacity-40":"bg-white",on:{click:function(t){return e.setType("index")}}},[e._v("\n            Algolia Index (∞ size)\n        ")]),n("div",{staticClass:"w-232 cursor-pointer mr-24 text-center rounded border border-proton-grey-opacity-60 p-24",class:"csv"===e.type?"bg-proton-grey-opacity-40":"bg-white",on:{click:function(t){return e.setType("csv")}}},[e._v("\n            CSV (∞ size)\n        ")]),n("div",{staticClass:"w-232 cursor-pointer mr-24 text-center rounded border border-proton-grey-opacity-60 p-24",class:"json"===e.type?"bg-proton-grey-opacity-40":"bg-white",on:{click:function(t){return e.setType("json")}}},[e._v("\n            JSON (∞ size)\n        ")]),n("div",{staticClass:"w-232 cursor-pointer mr-24 text-center rounded border border-proton-grey-opacity-60 p-24",class:"xml"===e.type?"bg-proton-grey-opacity-40":"bg-white",on:{click:function(t){return e.setType("xml")}}},[e._v("\n            XML (∞ size)\n        ")])]),["json","csv","xml"].includes(e.type)?n("div",[n("div",{staticClass:"mt-24"},[n("div",[n("input",{ref:"file",staticClass:"invisible",attrs:{type:"file"},on:{change:function(t){return e.setFiles(t.target.files)}}}),n("div",{staticClass:"border cursor-pointer rounded p-48 mt-8",class:e.isDragring?"border-mars-1":"border-proton-grey-opacity-60",on:{click:function(t){e.file=null,e.$refs.file.click()},dragenter:function(t){e.isDragring=!0},dragleave:function(t){e.isDragring=!1},drop:[function(t){e.isDragring=!1},function(t){return t.preventDefault(),e.setFiles(t.dataTransfer.files)}],dragover:function(e){e.preventDefault()}}},[n("div",[e._v("Click to choose file")]),n("div",{staticClass:"my-12"},[e._v("OR")]),n("div",[e._v(e._s(e.isDragring?"Drop file here":"Drag file here"))])]),e.file?n("div",{staticClass:"mt-4"},[e._v("\n                    Loaded: "+e._s(e.file.name)+"\n                ")]):e._e(),"xml"===e.type?n("div",{staticClass:"flex mt-24"},[e._v("\n                    Xml node name:\n                    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.xmlRootNode,expression:"xmlRootNode"}],ref:"",staticClass:"input-custom ml-8 w-124",attrs:{type:"text"},domProps:{value:e.xmlRootNode},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateXmlRootNode()},input:function(t){t.target.composing||(e.xmlRootNode=t.target.value)}}})]):e._e(),e.xmlError?n("div",{staticClass:"flex mt-16"},[n("div",{staticClass:"border border-mars-1-opacity-60 bg-mars-1-opacity-20 p-8 rounded",domProps:{innerHTML:e._s(e.xmlError)}})]):e._e(),e.isLoadingFile?n("div",{staticClass:"mt-24"},[e._v("Loading ...")]):e._e()])])]):e._e(),"index"===e.type?n("div",[n("div",{staticClass:"mt-24 flex"},[n("div",{staticClass:"flex items-center"},[n("app-selector",{model:{value:e.indexInfo.appId,callback:function(t){e.$set(e.indexInfo,"appId",t)},expression:"indexInfo.appId"}}),n("index-selector",{staticClass:"ml-24",attrs:{"app-id":e.indexInfo.appId},model:{value:e.indexInfo.indexName,callback:function(t){e.$set(e.indexInfo,"indexName",t)},expression:"indexInfo.indexName"}}),n("div",{staticClass:"flex ml-48"},[e._v("\n                    Fetch extra record:\n                    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.extraObjectID,expression:"extraObjectID"}],staticClass:"input-custom ml-8 w-124",attrs:{type:"text"},domProps:{value:e.extraObjectID},on:{input:function(t){t.target.composing||(e.extraObjectID=t.target.value)}}})])],1)])]):e._e(),e.dataset&&e.dataset.length>0?n("div",{staticClass:"mt-24"},[e._v("\n        "+e._s(e.dataset.length)+" records loaded\n        "),e.sample?n("span",[e._v("\n            (This is a sample, csv will be fully loaded during the apply step)\n        ")]):e._e()]):e._e()])},ie=[],oe=(n("06ef"),n("2989"),n("08b3")),ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("custom-select",{staticClass:"min-w-140 border-b border-telluric-blue-opacity-60 text-solstice-blue pb-4",attrs:{value:e.value,options:e.appIds,refine:e.refine},on:{input:e.onInput},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.option,s=t.inDropDown,r=t.isSelected,i=t.highlightString;return[n("div",[n("div",{staticClass:"flex"},[n("div",{domProps:{innerHTML:e._s(s?i(a):a)}}),s&&e.apps[a].__app_name?n("span",[e._v("\n                     - "),n("span",{domProps:{innerHTML:e._s(i(e.apps[a].__app_name))}})]):e._e()]),s&&e.apps[a].__app_owner?n("div",{class:r?"":"text-solstice-blue-opacity-60",domProps:{innerHTML:e._s(i(e.apps[a].__app_owner))}}):e._e()])]}}])},[n("template",{slot:"icon"},[n("box-icon",{staticClass:"block w-12 h-12 -mt-1 mr-8 fill-current"})],1)],2)},le=[],ue=(n("4f72"),n("0d9c"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"relative focus:outline-none",attrs:{tabindex:"-1"},on:{keyup:e.onKeyUp,keydown:e.onKeyDown,blur:e.fakeBlur}},[e.dropdownOpened&&e.refine?e._e():n("div",{staticClass:"flex items-center py-4 cursor-pointer text-sm leading-none",on:{click:e.openDropDown}},[e._t("icon"),e._t("default",null,{option:e.value,inDropDown:!1}),n("span",{staticClass:"ml-auto"}),n("chevron-down-icon",{staticClass:"block ml-24 w-8 h-8 fill-current"})],2),e.dropdownOpened&&e.refine?n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"px-8 py-4 text-solstice-blue rounded text-base bg-moon-grey w-full",domProps:{value:e.query},on:{keyup:e.onKeyUp,keydown:e.onKeyDown,blur:e.onBlur,input:function(t){t.target.composing||(e.query=t.target.value)}}}):e._e(),e.dropdownOpened?n("div",{staticClass:"shadow absolute z-10 bg-white dropdown mt-4 max-h-312 min-w-full overflow-y-scroll"},e._l(e.options,(function(t,a){return n("div",{staticClass:"flex p-8 cursor-pointer",class:e.selectedIndex===a?"bg-nebula-blue text-white hover:bg-nebula-blue hover:text-white":"",on:{mousedown:function(t){e.allowBlur=!1},mousemove:function(t){e.selectedIndex=a},mouseleave:function(t){e.selectedIndex=-1},click:function(t){e.selectedIndex=a,e.onSelected(t),e.allowBlur=!0}}},[e._t("default",null,{option:t,inDropDown:!0,isSelected:e.selectedIndex===a,highlightString:e.highlightString})],2)})),0):e._e()])])}),de=[],pe={functional:!0,render(e,t){const{_c:n,_v:a,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=s;return n("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 8",fill:"currentColor"},u),...d},r.concat([n("path",{attrs:{d:"M7 8a1 1 0 01-.71-.29l-6-6A1 1 0 011.71.29L7 5.59l5.29-5.3a1 1 0 111.42 1.42l-6 6A1 1 0 017 8z"}})]))}};n("f49d"),n("632c"),n("a7e1"),n("4fb0"),n("ae66");var he=null;function fe(e){return he=null===he?document.createElement("div"):he,he.textContent=e,he.innerHTML}function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/<(\/)?ais-highlight-(\d+)>/g,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=e.replace(t,"{{{$1ais-highlight-$2}}}");return fe(a).replace(/{{{(\/?)ais-highlight-[^}]*}}}/g,""===n?"<$1em>":'<$1em class="'.concat(n,'">'))}function ve(e){return e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="json-token '+t+'">'+me(e)+"</span>"}))}function ge(e,t){if(t.length<=0)return e;for(var n=t.toLowerCase().split(" ").sort((function(e,t){return t.length-e.length})).filter((function(e){return e.trim().length>0})),a="",s=0;s<e.length;s++){for(var r=!1,i=0;i<n.length;i++)if(e.toLowerCase().startsWith(n[i].toLowerCase(),s)){a+="<em>".concat(e.slice(s,s+n[i].length),"</em>"),s+=n[i].length-1,r=!0;break}r||(a+=e[s])}return a}var be={name:"CustomSelect",props:["value","options","displayEmptyQuery","refine","stringValueAttribute","allowFreeText"],components:{ChevronDownIcon:pe},data:function(){var e=this.stringValueAttribute&&this.value?this.value[this.stringValueAttribute]:this.value;return{allowBlur:!0,selectedIndex:-1,dropdownOpened:!1,query:e||""}},watch:{query:function(){if(this.refine){this.selectedIndex=-1;var e=this.query===this.stringValue?"":this.query;this.refine(e)}},value:function(){this.refine&&(this.query=this.stringValue)}},computed:{stringValue:function(){return this.stringValueAttribute&&this.value?this.value[this.stringValueAttribute]:this.value||""}},methods:{highlightString:function(e){return ge(e,this.query)},fakeBlur:function(){this.refine||this.onBlur()},onBlur:function(){this.allowBlur&&(this.dropdownOpened=!1,this.selectedIndex=-1)},onKeyDown:function(e){13!==e.which&&38!==e.which&&40!==e.which||e.preventDefault()},onKeyUp:function(e){var t;if(13===e.which||38===e.which||40===e.which)return e.preventDefault(),e.stopImmediatePropagation(),13===e.which&&this.onSelected(e),38===e.which&&(t=this.selectedIndex-1,t<0&&(t=this.options.length-1),this.selectedIndex=t),40===e.which&&(t=this.selectedIndex+1,t>this.options.length-1&&(t=0),this.selectedIndex=t),!1},onSelected:function(e){this.allowBlur=!1,-1!==this.selectedIndex&&this.options.length>0?this.$emit("input",this.options[this.selectedIndex]):this.allowFreeText&&this.query.length>0?this.$emit("input",{name:this.query}):this.$emit("onSelected",this.query,e),this.selectedIndex=0!==this.query.length||this.displayEmptyQuery?0:-1,this.allowBlur=!0,this.dropdownOpened=!1},openDropDown:function(){var e=this;this.dropdownOpened=!0,this.query=this.stringValue,this.refine&&a["a"].nextTick((function(){e.$refs.input.focus(),e.$refs.input.setSelectionRange(0,e.$refs.input.value.length)}))}}},xe=be,ye=Object(F["a"])(xe,ue,de,!1,null,null,null),we=ye.exports,_e={functional:!0,render(e,t){const{_c:n,_v:a,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=s;return n("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 23.53"},u),...d},r.concat([n("path",{attrs:{d:"M20.34 4.31l-8-4a3.07 3.07 0 00-2.68 0l-8 4A3 3 0 000 7v9.51a3 3 0 001.65 2.7l8 4a3 3 0 002.69 0l8-4A3 3 0 0022 16.53V7a3 3 0 00-1.66-2.69zM10.56 2.1A1 1 0 0111 2a1 1 0 01.44.1l7.32 3.66L11 9.64 3.24 5.76zm-8 15.32a1 1 0 01-.55-.9V7.37l8 4v9.78zm16.89 0L12 21.14v-9.77l8-4v9.16a1 1 0 01-.56.89z"}})]))}},ke=(n("0572"),{methods:{ownedByAlgolia:function(e){var t=this.$store.state.apps[e];return"MySuperApp"===e||e.endsWith(".local")||e.endsWith(".test")||t&&t.__app_owner&&t.__app_owner.length>0&&t.__app_owner.endsWith("@algolia.com")}}}),Ie={name:"AppSelector",components:{CustomSelect:we,BoxIcon:_e},props:["value","onlyAlgolia"],data:function(){return{query:""}},mixins:[ke],computed:{apiKey:function(){return this.$store.state.apps[this.appId]?this.$store.state.apps[this.appId].key:""},apps:function(){return this.$store.state.apps},appIds:function(){var e=this,t=Object.keys(this.apps).filter((function(t){return!e.onlyAlgolia||e.ownedByAlgolia(t)}));if(0===this.query.length)return t;var n=this.query.toLowerCase();return t.filter((function(t){return!(!e.apps[t].__app_name||!e.apps[t].__app_name.toLowerCase().includes(n))||(!(!e.apps[t].__app_owner||!e.apps[t].__app_owner.toLowerCase().includes(n))||t.toLowerCase().includes(n))}))}},created:function(){this.value?this.$store.commit("apps/addAppId",{appId:this.value}):this.appIds.length>0&&(this.$emit("input",this.appIds[0]),this.$store.commit("apps/addAppId",{appId:this.appIds[0]}))},methods:{refine:function(e){this.query=e},onInput:function(e){this.query="",this.$emit("input",e),this.$store.commit("apps/addAppId",{appId:e})}}},Oe=Ie,je=Object(F["a"])(Oe,ce,le,!1,null,null,null),Ae=je.exports,Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("custom-select",{staticClass:"min-w-140 border-b border-telluric-blue-opacity-60 text-solstice-blue pb-4",attrs:{"string-value-attribute":"name",options:e.indicesWithForced,refine:e.refine,"allow-free-text":e.allowFreeText},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.option,s=t.inDropDown,r=t.isSelected,i=t.highlightString;return[n("div",{domProps:{innerHTML:e._s(s?i(a.name):a.name)}}),s?n("div",{staticClass:"ml-auto"}):e._e(),s&&void 0!==a.entries?n("div",{staticClass:"ml-16",class:r?"text-white":"text-solstice-blue-opacity-50"},[e._v("\n            "+e._s(a.entries)+" records\n        ")]):e._e()]}}]),model:{value:e.indexInfo,callback:function(t){e.indexInfo=t},expression:"indexInfo"}},[n("template",{slot:"icon"},[n("list-icon",{staticClass:"block w-12 h-12 mr-8 -mt-1 fill-current"})],1)],2)},Pe=[],Ne={functional:!0,render(e,t){const{_c:n,_v:a,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=s;return n("svg",{class:[i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 14",fill:"currentColor"},u),...d},r.concat([n("path",{attrs:{d:"M19 2H6a1 1 0 010-2h13a1 1 0 010 2zM19 8H6a1 1 0 010-2h13a1 1 0 010 2zM19 14H6a1 1 0 010-2h13a1 1 0 010 2zM1 2H.8a.64.64 0 01-.18-.06.76.76 0 01-.18-.09 1.58 1.58 0 01-.15-.12l-.12-.17a.76.76 0 01-.09-.18A.64.64 0 010 1.2 1.5 1.5 0 010 1 1 1 0 01.08.62 1.15 1.15 0 01.29.29 1 1 0 011.38.08a1 1 0 01.33.21A1.05 1.05 0 012 1a1.5 1.5 0 010 .2.64.64 0 01-.06.18.76.76 0 01-.09.18l-.12.15A1.05 1.05 0 011 2zM1 8H.81a.6.6 0 01-.19-.06.76.76 0 01-.18-.09l-.15-.14A1 1 0 010 7a1 1 0 01.08-.38 1 1 0 01.21-.33l.15-.12a.76.76 0 01.18-.09A.6.6 0 01.81 6a1 1 0 01.9.27 1 1 0 01.21.33A1 1 0 012 7a1.5 1.5 0 010 .2.64.64 0 01-.06.18.76.76 0 01-.09.18l-.12.15A1.05 1.05 0 011 8zM1 14a1 1 0 01-.38-.08 1.15 1.15 0 01-.33-.21 1 1 0 01-.21-1.09 1 1 0 01.21-.33 1 1 0 011.09-.21 1.15 1.15 0 01.33.21 1.15 1.15 0 01.21.33.94.94 0 010 .76 1.15 1.15 0 01-.21.33A1 1 0 011 14z"}})]))}},Se=n("9ebc"),Te=n.n(Se),Ee=n("b137"),Re=n("f9d9"),Fe=n("1f39");function De(e){return new Promise((function(t){return setTimeout(t,e)}))}var Me={},$e={},Le=function(e){return Ke.apply(this,arguments)};function Ke(){return Ke=Object(T["a"])(regeneratorRuntime.mark((function e(t){var n,a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!$e[t]){e.next=5;break}return e.next=3,De(10);case 3:e.next=0;break;case 5:if(!Me[t]){e.next=7;break}return e.abrupt("return",Me[t]);case 7:return $e[t]=!0,n=Object({NODE_ENV:"production",BASE_URL:"/transform/"}).VUE_APP_METAPARAMS_BACKEND_ENDPOINT||"https://tools-backend.algolia.com",e.next=11,fetch("".concat(n,"/signature/").concat(t),{credentials:"include",headers:{"Content-Type":"application/json"}});case 11:return a=e.sent,e.next=14,a.json();case 14:return s=e.sent,r=s.signature?s.signature:"",Me[t]=r,$e[t]=!1,e.abrupt("return",r);case 19:case"end":return e.stop()}}),e)}))),Ke.apply(this,arguments)}var Ue=n("f10a");function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){Object(b["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ze=function(e){var t=Ve({},e);return e["optionalWords=query"]&&e.query&&(t.optionalWords=e.query),delete t["optionalWords=query"],delete t["extraChartsAttributes"],t},qe=function(e,t){return e.map((function(e){var n=Array.isArray(e)?e:[e];return n.filter((function(e){return!e.startsWith(t)}))})).filter((function(e){return e.length>0}))},Je=function(e){if(void 0===Array.prototype.toJSON)return JSON.stringify(e);var t=Array.prototype.toJSON;delete Array.prototype.toJSON;var n=JSON.stringify(e);return Array.prototype.toJSON=t,n},He=function(e,t){if(void 0===e||null===e)return t;for(var n in e)null!==n&&void 0!==e[n]&&e.hasOwnProperty(n)&&(t+=""===t?"":"&",t+=n+"="+encodeURIComponent("[object Array]"===Object.prototype.toString.call(e[n])?Je(e[n]):e[n]));return t},Ge=function(e,t,n,a){var s=[];return s.push({indexName:e,params:He(Ve({},a,{facets:t}),"")}),n.forEach((function(t){var n=qe(a.facetFilters||[],"".concat(t,":")),r={facetFilters:n,facets:[t],analytics:!1,attributesToRetrieve:[],attributesToHighlight:[],attributesToSnippet:[],hitsPerPage:1,page:0,explain:void 0};s.push({indexName:e,params:He(Object.assign({},a,r),"")})})),s},We=function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t){var n,a,s,r,i,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.disjunctiveFacets,a=Object(x["a"])(t,["disjunctiveFacets"]),s=a.facetFilters||[],r={},n.forEach((function(e){return s.forEach((function(t){r[e]=[];var n=Array.isArray(t)?t:[t];n.forEach((function(t){t.startsWith("".concat(e,":"))&&r[e].push(t.replace("".concat(e,":"),""))}))}))})),i=Object.keys(r).filter((function(e){return r[e].length>0})),o=Ge(this.indexName,n,i,a),c={},void 0!==this.userId()&&(c.headers={"X-Algolia-User-ID":this.userId()}),e.next=10,this.transporter.read({method:"POST",path:"1/indexes/*/queries",data:{requests:o,strategy:"none"}},c);case 10:return l=e.sent,u=l.results[0],u.disjunctiveFacets=JSON.parse(JSON.stringify(u.facets||{})),i.forEach((function(e,t){u.disjunctiveFacets[e]=l.results[t+1].facets[e],r[e].forEach((function(t){u.disjunctiveFacets[e]&&void 0===u.disjunctiveFacets[e][t]&&(u.disjunctiveFacets[e][t]=null)}))})),e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(e){var t=ze(e);return t.disjunctiveFacets&&t.disjunctiveFacets.length>0?this.disjunctiveSearch(t):(delete t.disjunctiveFacets,void 0!==this.userId()&&(t.headers={"X-Algolia-User-ID":this.userId()}),this.search(t.query||"",t))},Qe=function(e){var t=ze(e),n=t.cursor||null;delete t.disjunctiveFacets,delete t.cursor;var a={params:Object(Ue["a"])(t)};n&&(a.cursor=n);var s={};return void 0!==this.userId()&&(s.headers={"X-Algolia-User-ID":this.userId()}),this.transporter.read({method:"POST",path:Object(Fe["b"])("/1/indexes/%s/browse",this.indexName),data:a},s)},Ye=function(e){var t=ze(e),n=t.facetName,a=t.facetQuery,s=Object(x["a"])(t,["facetName","facetQuery"]);return void 0!==this.userId()&&(s.headers={"X-Algolia-User-ID":this.userId()}),this.searchForFacetValues(n,a,s)},Ze={customSearch:Xe,customBrowse:Qe,disjunctiveSearch:We,customSearchForFacetValues:Ye,buildFacetFilters:qe};function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){Object(b["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nt=function(e){return"MySuperApp"===e||e.endsWith(".local")||e.endsWith(".test")},at={},st={};function rt(e,t,n){if(nt(e))return[{url:"localhost-1.algolia.io:8080",accept:3}];if(void 0===n||"dsn"===n||"-dsn"===n)return[{url:e+"-1.algolianet.com",accept:3},{url:e+"-2.algolianet.com",accept:3},{url:e+"-3.algolianet.com",accept:3}];var a=null;switch(n){case"-1":a={url:"".concat(e,"-1.algolianet.com"),accept:3};break;case"-2":a={url:"".concat(e,"-2.algolianet.com"),accept:3};break;case"-3":a={url:"".concat(e,"-3.algolianet.com"),accept:3};break;default:a={url:"".concat(n,"-1.algolia.net"),accept:3}}return[a,a,a]}function it(e,t,n,a,s){return ot.apply(this,arguments)}function ot(){return ot=Object(T["a"])(regeneratorRuntime.mark((function e(t,n,a,s,r){var i,o,c,l,u,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i="".concat(t,"-").concat(n,"-").concat(a,"-").concat(s,"-").concat(r),!at[i]){e.next=3;break}return e.abrupt("return",at[i]);case 3:if(o={},nt(t)||!n||!0===r){e.next=9;break}return e.next=7,Le(t);case 7:c=e.sent,o["X-Algolia-Signature"]=c;case 9:return l=Object(Re["a"])(1),u=Object(Ee["a"])(),d=Te()(t,n||" ",{requestsCache:u,responsesCache:u,hostsCache:u,logger:l,hosts:rt(t,n,a),headers:o}),p=Object(Fe["a"])(d,{customInitIndex:function(e){return function(t){var n=["saveObjects","deleteObject","getObject","getObjects","waitTask","setSettings"],a=e.initIndex(t);return n.forEach((function(e){var t=a[e];a[e]=function(n,a){var s=a||{},r=s.headers||{};void 0!==this.userId()&&(r["X-Algolia-User-ID"]=this.userId()),"setSettings"!==e&&(s.headers=r);var i=t(n,s),o=i.wait;return i.wait=function(){return o({headers:r})},i}})),tt({},a,{},Ze,{userId:function(){return s||void 0}})}}}),at[i]=p,e.abrupt("return",p);case 15:case"end":return e.stop()}}),e)}))),ot.apply(this,arguments)}function ct(e,t,n,a,s,r){return lt.apply(this,arguments)}function lt(){return lt=Object(T["a"])(regeneratorRuntime.mark((function e(t,n,a,s,r,i){var o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o="".concat(t,"-").concat(n,"-").concat(a,"-").concat(s,"-").concat(r,"-").concat(i),!st[o]){e.next=3;break}return e.abrupt("return",st[o]);case 3:return e.next=5,it(t,n,s,r,i);case 5:return c=e.sent,l=c.customInitIndex(a),st[o]=l,e.abrupt("return",st[o]);case 9:case"end":return e.stop()}}),e)}))),lt.apply(this,arguments)}var ut={name:"IndexSelector",components:{AppSelector:Ae,CustomSelect:we,BoxIcon:_e,ListIcon:Ne},props:["appId","value","forcedIndices","allowFreeText"],data:function(){return{allIndices:[],indices:[],indexInfo:{name:this.value},nbPages:1,maxNbPagesInMemory:5}},created:function(){this.registerIndex(),this.updateIndices(!1)},computed:{indicesWithForced:function(){var e=this.forcedIndices?this.forcedIndices:[];return[].concat(Object(oe["a"])(e),Object(oe["a"])(this.indices))},indexName:{get:function(){return this.indexInfo.name},set:function(e){a["a"].set(this.indexInfo,"name",e)}},adminAPIKey:function(){return this.$store.state.apps[this.appId]?this.$store.state.apps[this.appId].key:null}},watch:{value:function(){this.indexInfo.name=this.value},appId:function(){this.indexName=this.value,this.$emit("input",null),this.updateIndices(!0)},indexName:function(){this.indexInfo.name!==this.value&&this.$emit("input",this.indexInfo.name),this.registerIndex(),this.updateIndices(!1)},adminAPIKey:function(){this.updateIndices(!0)}},methods:{registerIndex:function(){var e=this;this.appId&&this.indexInfo.name&&(this.$store.commit("apps/".concat(this.appId,"/addIndex"),this.indexName),["searchParams","searchParams2"].forEach((function(t){e.$store.commit("apps/".concat(e.appId,"/").concat(e.indexName,"/deleteParam"),{configKey:t,inputKey:"page"})})))},refine:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.appId&&this.adminAPIKey){e.next=2;break}return e.abrupt("return");case 2:if(!(t.length<=0)){e.next=5;break}return this.indices=this.allIndices,e.abrupt("return");case 5:if(!(this.nbPages>this.maxNbPagesInMemory)){e.next=15;break}return e.next=8,it(this.appId,this.adminAPIKey);case 8:return n=e.sent,e.next=11,n.listIndices({queryParameters:{page:0,prefix:encodeURIComponent(t)}});case 11:a=e.sent,this.indices=a.items.sort((function(e,t){return e.updatedAt<t.updatedAt?1:e.updatedAt>t.updatedAt?-1:0})),e.next=17;break;case 15:s=t.split(" "),this.indices=this.allIndices.filter((function(e){return s.every((function(t){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}))})).sort((function(e,n){return e.name===t?-1:n.name===t?1:0}));case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),updateIndices:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.appId&&this.adminAPIKey){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,it(this.appId,this.adminAPIKey);case 4:return n=e.sent,e.next=7,n.listIndices({queryParameters:{page:0}});case 7:if(a=e.sent,this.nbPages=a.nbPages,!(this.nbPages>1&&this.nbPages<=this.maxNbPagesInMemory)){e.next=13;break}return e.next=12,n.listIndices();case 12:a=e.sent;case 13:if(this.allIndices=a.items.sort((function(e,t){return e.updatedAt<t.updatedAt?1:e.updatedAt>t.updatedAt?-1:0})),this.indices=this.allIndices,!(this.indices.length<=0)){e.next=17;break}return e.abrupt("return");case 17:(t&&this.indexInfo.name!==this.value||null===this.value)&&(this.indexInfo.name=this.value?this.value:this.$store.state.apps[this.appId].lastIndexName||this.indices[0].name,this.$emit("input",this.indexInfo.name));case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},dt=ut,pt=Object(F["a"])(dt,Ce,Pe,!1,null,null,null),ht=pt.exports,ft=n("28e0"),mt=n.n(ft),vt=function(e,t){var n=this,a=1048576,s=0,r=!1,i=!1,o=function(){};this.pause=function(){i=!0},this.resume=function(){i=!1,n.nextChunk()},this.chunkLoaded=function(t){s+=a,r=!a||s>=e.size,o(t.target.result),n.nextChunk()},this.readChunk=function(){if(!i){var t=e;if(a){var n=Math.min(s+a,e.size);t=t.slice(s,n)}c.readAsText(t,"UTF-8")}},this.nextChunk=function(){r?t():this.readChunk()},this.start=function(e){o=e,this.nextChunk()};var c=new FileReader;c.onload=this.chunkLoaded,c.onerror=function(){console.log("error")}},gt=n("501f"),bt=n.n(gt),xt=n("6e77"),yt=n.n(xt);function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){Object(b["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kt=function(e,t){var n=yt.a.parser(!1),a=e.toLowerCase()||"item",s=[],r=function(e){var t=e.toLowerCase();return t.startsWith("g:")||t.startsWith("c:")?t.slice(2):t};return n.ontext=function(e){if(s.length>0){var t=s[s.length-1];void 0===t.value&&(t.value=""),t.value+=e.trim()}},n.oncdata=function(e){if(s.length>0){var t=s[s.length-1];void 0===t.value&&(t.value=""),t.value+=e}},n.onopentag=function(e){var t=e.name.toLowerCase();if(t===a)Object.keys(e.attributes).length>0?s.push({attrs:Object.keys(e.attributes).reduce((function(t,n){return _t({},t,Object(b["a"])({},r(n),e.attributes[n]))}),{})}):s.push({});else if(s.length>0){var n=r(t),i=s[s.length-1];void 0===i[n]?(i[n]={},i=i[n]):(Array.isArray(i[n])||(i[n]=[i[n]]),i[n].push({}),i=i[n][i[n].length-1]),Object.keys(e.attributes).length>0&&(i.attrs=Object.keys(e.attributes).reduce((function(t,n){return _t({},t,Object(b["a"])({},r(n),e.attributes[n]))}),{})),s.push(i)}},n.onclosetag=function(e){if(s.length>0){var n=s.pop();0===s.length&&t(n)}},n},It={name:"DatasetSelector",components:{AppSelector:Ae,IndexSelector:ht},data:function(){return{type:null,url:"",file:null,rawDataSetString:"",dataset:null,csvFile:null,jsonFile:null,xmlFile:null,extraObjectID:"",isLoadingFile:!1,isDragring:!1,sample:!1,xmlError:"",xmlRootNode:"item",indexInfo:{appId:null,indexName:null},nbHits:null}},watch:{dataset:function(){this.$emit("onUpdateDataset",this.dataset)},csvFile:function(){this.$emit("onUpdateCsvFile",this.csvFile)},jsonFile:function(){this.$emit("onUpdateJsonFile",this.jsonFile)},xmlFile:function(){this.$emit("onUpdateXmlFile",this.xmlFile)},indexInfo:{deep:!0,handler:function(){this.loadIndex()}},extraObjectID:function(){this.loadIndex(!0)}},computed:{apiKey:function(){return this.indexInfo.appId&&this.$store.state.apps[this.indexInfo.appId]?this.$store.state.apps[this.indexInfo.appId].key:""}},methods:{updateXmlRootNode:function(){this.$emit("onUpdateXmlRootNode",this.xmlRootNode),this.reset(),this.loadFile()},setType:function(e){this.reset(),this.type=e,"index"===e&&this.loadIndex()},reset:function(){this.nbHits=null,this.dataset=null,this.csvFile=null,this.jsonFile=null,this.isLoadingFile=!1,this.sample=!1,this.xmlError="",this.$emit("onUpdateIndexInfo",null)},setFiles:function(e){if(e){var t=Object(oe["a"])(e);this.file=t[0],this.reset(),this.loadFile()}},loadFile:function(){var e=this;if(this.file)if("json"===this.type){this.isLoadingFile=!0;var t=0,n=[],a=new vt(this.file,(function(){e.jsonFile=e.file,e.dataset=Object.freeze(n),e.isLoadingFile=!1})),s=bt()();s.node("!.[*]",(function(s){e.isLoadingFile&&(n.push(s),t++,t>=100&&(e.jsonFile=e.file,e.dataset=Object.freeze(n),e.isLoadingFile=!1,e.sample=!0,a.pause()))})),a.start((function(e){s.emit("data",e)}))}else if("csv"===this.type){this.isLoadingFile=!0;var r=[],i=0;mt.a.parse(this.file,{header:!0,delimitersToGuess:[",",";","\t","#"],preview:100,step:function(){var t=Object(T["a"])(regeneratorRuntime.mark((function t(n,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r.push(n.data),i++,i>=100&&(e.csvFile=e.file,e.dataset=Object.freeze(r),e.isLoadingFile=!1,e.sample=!0);case 3:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}(),error:function(){i++},complete:function(t){e.csvFile=e.file,e.dataset=Object.freeze(r),e.isLoadingFile=!1}})}else if("xml"===this.type){this.isLoadingFile=!0;var o=0,c=[],l=new kt(this.xmlRootNode,(function(t){e.isLoadingFile&&(c.push(t),o++,o>=100&&(e.xmlFile=e.file,e.dataset=Object.freeze(c),e.isLoadingFile=!1,e.sample=!0,u.pause()))})),u=new vt(this.file,(function(){c.length<=0?e.xmlError="No node &lt;".concat(e.xmlRootNode,"&gt; found in the first 10MB of the file.<br>Change it and press enter"):(e.xmlFile=e.file,e.dataset=Object.freeze(c)),e.isLoadingFile=!1,l.close()})),d=0;u.start((function(t){if(d>=10)return e.xmlError="No node &lt;".concat(e.xmlRootNode,"&gt; found in the first 10MB of the file.<br>Change it and press enter"),e.isLoadingFile=!1,u.pause(),void l.close();d++,l.write(t)}))}},loadIndex:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t){var n,a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t||this.reset(),this.indexInfo.appId&&this.indexInfo.indexName&&this.apiKey){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,ct(this.indexInfo.appId,this.apiKey,this.indexInfo.indexName);case 5:return n=e.sent,e.next=8,n.search("",{attributesToRetrieve:["*"],attributesToHighlight:[],attributesToSnippet:[]});case 8:if(a=e.sent,!(this.extraObjectID.length>0)){e.next=14;break}return e.next=12,n.getObject(this.extraObjectID,{attributesToRetrieve:["*"]});case 12:s=e.sent,a.hits.unshift(s);case 14:r=a.hits,this.dataset=Object.freeze(r),this.nbHits=a.nbHits,this.sample=a.nbHits>this.dataset.length,this.$emit("onUpdateIndexInfo",this.indexInfo);case 19:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},Ot=It,jt=Object(F["a"])(Ot,re,ie,!1,null,null,null),At=jt.exports,Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",{staticClass:"mt-24 text-solstice-blue-opacity-80"},[e._v("Transform")]),n("div",{staticClass:"mt-24"},[n("div",{staticClass:"flex"},[n("div",{staticClass:"w-third pr-24"},[n("div",{staticClass:"bg-white rounded border border-proton-grey-opacity-60"},[n("div",{staticClass:"text-center p-8 border-b border-proton-grey-opacity-60 bg-proton-grey-opacity-40 text-telluric-blue text-xs uppercase tracking-wide"},[e._v("\n                        Old Record\n                    ")]),n("div",{staticClass:"p-24"},[e.srcObjectExample?n("attributes",{staticClass:"w-full",attrs:{"top-attributes":["objectID"],"no-collapse":!0,item:e.hitsTransformer.transformObj(e.srcObjectExample)._v_}}):e._e()],1),n("div",{staticClass:"flex"},[n("pagination",{staticClass:"mx-auto",attrs:{page:e.page,"nb-pages":e.nbPages},on:{onUpdatePage:function(t){e.page=t}}})],1)])]),n("div",{staticClass:"w-third pr-24"},[n("div",[n("div",{staticClass:"text-center p-8 rounded border border-proton-grey-opacity-60 bg-proton-grey-opacity-40 text-telluric-blue text-xs uppercase tracking-wide"},[e._v("\n                        Transformer\n                    ")]),n("div",{staticClass:"mt-24"},[n("monaco-editor",{staticClass:"w-full h-512 rounded overflow-hidden",attrs:{language:"javascript"},on:{onShouldSave:function(t){return e.saveTransformer(e.saveAs)}},model:{value:e.transformer,callback:function(t){e.transformer=t},expression:"transformer"}})],1),n("div",{staticClass:"flex items-center mt-8"},[n("div",{staticClass:"text-center",class:{invisible:!e.hasBeenSaved}},[e._v("\n                            Saved "+e._s("new"===e.savedConfig?"draft":e.savedConfig)+"!\n                        ")]),n("div",{staticClass:"ml-auto"},[n("a",{staticClass:"text-nebula-blue cursor-pointer hover:underline",on:{click:function(t){e.transformer=e.generatedConfig()}}},[e._v("auto-generate")])]),n("div",{staticClass:"ml-16"},[n("a",{staticClass:"text-nebula-blue cursor-pointer hover:underline",on:{click:function(t){return e.reset()}}},[e._v("reset")])])])]),n("div",{staticClass:"mt-12 text-solstice-blue-opacity-60"},[n("div",{staticClass:"flex"},[e._m(0),n("div",{staticClass:"w-half"},[n("h3",{staticClass:"mb-12"},[e._v("Current Draft")]),n("div",[n("div",{staticClass:"flex ml-auto"},[n("div",[e._v("Save as:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.saveAs,expression:"saveAs"}],staticClass:"ml-8 input-custom w-124",domProps:{value:e.saveAs},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveTransformer(e.saveAs,!0)},input:function(t){t.target.composing||(e.saveAs=t.target.value)}}})])]),n("h3",{staticClass:"mt-12 mb-12"},[e._v("Backups")]),n("div",[e._l(e.notNewTransformers,(function(t){return n("div",{staticClass:"flex"},[n("div",{staticClass:"w-full group"},[e._v("\n                                        -\n                                        "),n("a",{staticClass:"text-nebula-blue cursor-pointer hover:underline",on:{click:function(n){e.transformer=t.body,e.saveTransformer()}}},[e._v(e._s(t.name))]),n("trash-icon",{staticClass:"ml-12 w-12 h-12 cursor-pointer hover:text-telluric-blue invisible group-hover:visible",on:{click:function(n){return e.deleteTransformer(t.name)}}})],1)])})),0===e.notNewTransformers.length?n("div",[e._v("\n                                    No backups\n                                ")]):e._e()],2)])])])]),n("div",{staticClass:"w-third pr-24"},[n("div",{staticClass:"bg-white rounded border border-proton-grey-opacity-60"},[n("div",{staticClass:"text-center p-8 border-b border-proton-grey-opacity-60 bg-proton-grey-opacity-40 text-telluric-blue text-xs uppercase tracking-wide"},[e._v("\n                        New record\n                    ")]),n("div",{staticClass:"p-24"},[!e.error&&e.dstObjectExample?n("attributes",{staticClass:"w-full",attrs:{"top-attributes":["objectID"],"no-collapse":!0,item:e.hitsTransformer.transformObj(e.dstObjectExample)._v_}}):n("div",[e._v("\n                            "+e._s(e.error)+"\n                        ")])],1)])])])])])},Pt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-half"},[n("h3",{staticClass:"mb-12"},[e._v("Help")]),e._v("\n                            Return Object to modify the object\n                            "),n("br"),e._v("\n                            Return Array to split records\n                            "),n("br"),e._v("\n                            Return null to not index the record\n                            "),n("br"),n("br"),e._v("\n                            async/await is allowed\n                            "),n("br"),e._v("\n                            this.algoliasearch gives you access to algolia lib\n                        ")])}],Nt=(n("288e"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")}),St=[],Tt=n("a95d"),Et={name:"MonacoEditor",props:["value","language"],watch:{value:function(e){if(this.editor){var t=this.editor;e!==t.getValue()&&t.setValue(e)}},theme:function(e){this.editor&&this.monaco.editor.setTheme(e)}},mounted:function(){var e=this,t={minimap:{enabled:!1},value:this.value,theme:"vs-dark",language:this.language};this.editor=Tt.editor.create(this.$el,t),this.editor.onDidChangeModelContent((function(t){var n=e.editor.getValue();e.value!==n&&e.$emit("input",n,t)}));var n=Tt.KeyMod,a=Tt.KeyCode;this.editor.addCommand(n.chord(n.CtrlCmd|a.KEY_S),(function(){e.$emit("onShouldSave")}))},beforeDestroy:function(){this.editor&&this.editor.dispose()}},Rt=Et,Ft=Object(F["a"])(Rt,Nt,St,!1,null,null,null),Dt=Ft.exports,Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.currentKeys,(function(t){return n("div",{key:t,staticClass:"flex"},[n("div",{staticClass:"w-128 min-w-128 mr-16 text-right json-token key truncate",attrs:{title:t}},[e._v("\n            "+e._s(t)+":\n        ")]),n("attribute",{staticStyle:{width:"calc(100% - 128px)"},attrs:{item:e.item[t]}})],1)})),e.needsCollapse&&e.nbExtraAttributes>0?n("div",{staticClass:"w-128 min-w-128 mr-16 text-right text-nebula-blue cursor-pointer",on:{click:function(t){e.isCollapsed=!e.isCollapsed}}},[e.isCollapsed?n("span",[e._v("Show "+e._s(e.nbExtraAttributes)+" more")]):e._e(),e.isCollapsed?e._e():n("span",[e._v("Show "+e._s(e.nbExtraAttributes)+" less")])]):e._e()],2)},$t=[],Lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isArray||e.isObject?n("div",[e.isArray?n("div",[n("div",{staticClass:"flex relative"},[e.canExand?n("div",{staticClass:"absolute left-0 -ml-12 cursor-pointer",on:{click:function(t){e.collapsed=!e.collapsed}}},[e._v(e._s(e.collapsed?"+":"-"))]):e._e(),e.parentKey?n("div",{staticClass:"mr-4"},[e._v(e._s(e.parentKey)+":")]):e._e(),e.isCollapsed?e._e():n("div",[e._v("[")]),e.isCollapsed?n("div",{staticClass:"whitespace-pre truncate",domProps:{innerHTML:e._s(e.highlightedValue)}}):e._e()]),e.isCollapsed?e._e():n("div",{staticClass:"ml-36"},e._l(e.item._v_,(function(t,a){return n("div",{staticClass:"relative"},[n("div",{staticClass:"absolute left-0 -ml-32 text-proton-grey"},[e._v("["+e._s(a)+"]")]),n("attribute",{attrs:{item:t}})],1)})),0),e.isCollapsed?e._e():n("div",[e._v("]")])]):e._e(),e.isObject?n("div",[n("div",{staticClass:"flex relative"},[e.canExand?n("div",{staticClass:"absolute left-0 -ml-12 cursor-pointer",on:{click:function(t){e.collapsed=!e.collapsed}}},[e._v(e._s(e.collapsed?"+":"-"))]):e._e(),e.parentKey?n("div",{staticClass:"mr-4"},[e._v(e._s(e.parentKey)+":")]):e._e(),e.isCollapsed?e._e():n("div",[e._v("{")]),e.isCollapsed?n("div",{staticClass:"whitespace-pre truncate",domProps:{innerHTML:e._s(e.highlightedValue)}}):e._e()]),e.isCollapsed?e._e():n("div",{staticClass:"ml-36"},e._l(e.item._v_,(function(e,t){return n("attribute",{attrs:{item:e,"parent-key":t}})})),1),e.isCollapsed?e._e():n("div",[e._v("}")])]):e._e()]):e._e(),e.isBoolean||e.isNumber||e.isNull?n("div",[n("div",{staticClass:"flex"},[e.parentKey?n("div",[e._v(e._s(e.parentKey)+": ")]):e._e(),e.isBoolean?n("div",{staticClass:"json-token boolean"},[e._v(e._s(e.stringValue))]):e._e(),e.isNumber?n("div",{staticClass:"json-token number"},[e._v(e._s(e.stringValue))]):e._e(),e.isNull?n("div",{staticClass:"json-token null"},[e._v("null")]):e._e()])]):e._e(),e.isString?n("div",[n("div",{staticClass:"flex relative"},[e.isLong?n("div",{staticClass:"absolute left-0 -ml-12 cursor-pointer",on:{click:function(t){e.collapsed=!e.collapsed}}},[e._v(e._s(e.collapsed?"+":"-"))]):e._e(),e.parentKey?n("div",{staticClass:"mr-4"},[e._v(e._s(e.parentKey)+":")]):e._e(),e.collapsed?n("div",{staticClass:"whitespace-pre truncate",domProps:{innerHTML:e._s(e.highlightedValue)}}):e._e(),e.collapsed?e._e():n("div",{staticClass:"json-token string break-words w-full"},[n("span",{domProps:{innerHTML:e._s(e.escapeAndHighlightHit(e.rawStringValue))}})])])]):e._e()])},Kt=[];function Ut(e){return"string"===typeof e||e instanceof String}function Bt(e){return e&&"object"===Object(r["a"])(e)&&e.constructor===Object}function Vt(e){return!isNaN(parseFloat(e))&&isFinite(e)}var zt={name:"Attribute",props:["item","parentKey"],data:function(){return{collapsed:!0,escapeAndHighlightHit:me}},computed:{canExand:function(){return this.isLong&&!this.isForcedExpanded},isForcedExpanded:function(){return!this.isString&&this.item._b_},isCollapsed:function(){return this.collapsed&&!this.item._b_},highlightedValue:function(){return ve(this.item._s_||this.stringValue)},stringValue:function(){return JSON.stringify(this.item._v_)},rawStringValue:function(){return JSON.stringify(this.item._rv_||this.item._rv_)},isArray:function(){return Array.isArray(this.item._v_)},isLong:function(){return this.isArray||this.isObject||this.isString&&this.stringValue.length>53},isString:function(){return Ut(this.item._v_)},isObject:function(){return this.item._v_&&"object"===Object(r["a"])(this.item._v_)&&this.item._v_.constructor===Object},isBoolean:function(){return"boolean"===typeof this.item._v_},isNumber:function(){return"number"===typeof this.item._v_},isNull:function(){return null==this.item._v_}}},qt=zt,Jt=Object(F["a"])(qt,Lt,Kt,!1,null,null,null),Ht=Jt.exports,Gt={credentials:["appId","apiKey","indexName","server","method","userId"],images:["imageSize","imageAttribute","imageBaseUrl","imageSuffixUrl","ignoreImageProxy"],attributes:["titleAttributeName","autoTitleAttributeName","showSearchableAttributes","showCustomRanking","showAttributesForFaceting","showOnlyMatchingAttributes"],paramsAndSettings:["query","searchParams","indexSettings","keysIndexer"],response:["analyseResponse","searchResponse"],display:["analyseMaxNbPoints","displayMode","displayRankingInfo"],actions:["readOnly","isReplica","canJumpRules","canJumpSynonyms","canJumpRecords","jumpTo"]},Wt={name:"Attributes",components:{Attribute:Ht},props:["topAttributes","searchableAttributes","item","noCollapse"].concat(Object(oe["a"])(Gt.attributes),Object(oe["a"])(Gt.paramsAndSettings)),data:function(){return{isCollapsed:!0,reservedAttributes:{_highlightResult:!0,_snippetResult:!0,_rankingInfo:!0,_distinctSeqID:!0}}},computed:{nbExtraAttributes:function(){return this.allKeys.length-this.keys.length},needsCollapse:function(){return!0!==this.noCollapse&&this.topAttributes.length>0},uncollapsedAttributes:function(){var e=this,t=this.searchParams&&this.searchParams.attributesToRetrieve;return!t&&this.showSearchableAttributes&&this.showOnlyMatchingAttributes?this.keys.filter((function(t){return"objectID"===t||(-1===e.searchableAttributes.indexOf(t)||e.item[t]._b_)})):this.keys},currentKeys:function(){return this.needsCollapse&&this.isCollapsed?this.uncollapsedAttributes:this.allKeys},keys:function(){var e=this;return this.allKeys.filter((function(t){return-1!==e.topAttributes.indexOf(t)}))},allKeys:function(){var e=this,t=this.searchParams&&!0===this.searchParams.getRankingInfo;return Object.keys(this.item).filter((function(n){return!e.reservedAttributes[n]||!0===t&&"_rankingInfo"===n})).sort((function(t,n){var a=e.topAttributes.indexOf(t),s=e.topAttributes.indexOf(n);return a===s?0:-1===a?1:-1===s||a<s?-1:1}))}}},Xt=Wt,Qt=Object(F["a"])(Xt,Mt,$t,!1,null,null,null),Yt=Qt.exports;function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){Object(b["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tn=function(e){this.excluded=e||[],this.recursivelyGetValues=function(e){var t=this;return e&&void 0!==e._v_?this.recursivelyGetValues(e._v_):Array.isArray(e)?e.slice(0,10).map((function(e){return t.recursivelyGetValues(e)})):this.isObject(e)?Object.keys(e).slice(0,10).reduce((function(n,a){return en({},n,Object(b["a"])({},a,t.recursivelyGetValues(e[a])))}),{}):e},this.getNewItemObject=function(e,t,n){var a,s={},r=!1;for(a in e)if(-1===this.excluded.indexOf(a)&&void 0!==e[a]){var i=this.getNewItem(e[a],void 0!==t?t[a]:void 0,void 0!==n?n[a]:void 0);s[a]=i,r=r||i._b_}return{_v_:s,_s_:JSON.stringify(this.recursivelyGetValues(s)),_b_:r}},this.getNewItemArray=function(e,t,n){var a=this,s=!1,r=[];return e.slice(0,1e3).forEach((function(e,i){var o=a.getNewItem(e,void 0!==t?t[i]:void 0,void 0!==n?n[i]:void 0);s=s||o._b_,r.push(o)})),{_v_:r,_s_:JSON.stringify(this.recursivelyGetValues(r)),_b_:s}},this.getNewItem=function(e,t,n){if(this.isObject(e))return this.getNewItemObject(e,t,n);if(Array.isArray(e))return this.getNewItemArray(e,t,n);var a=void 0!==n&&n.matchLevel&&"none"!==n.matchLevel,s=void 0!==t&&t.matchLevel&&"none"!==t.matchLevel,r=a?n.value:e,i=s?t.value:e;return{_b_:a,_v_:r,_rv_:i}},this.isObject=function(e){return e&&"object"===Object(r["a"])(e)&&e.constructor===Object},this.transformObj=function(e){return this.getNewItemObject(e,e._highlightResult,e._snippetResult)},this.getNewItemArraySimple=function(e,t){var n=this;return e.map((function(e,a){return n.getNewItemSimple(e,void 0!==t?t[a]:void 0)}))},this.getNewItemSimple=function(e,t){if(this.isObject(e))return this.getNewItemObjectSimple(e,t);if(Array.isArray(e))return this.getNewItemArraySimple(e,t);var n=void 0!==t&&void 0!==t.matchLevel;return n?t.value:e},this.getNewItemObjectSimple=function(e,t,n){var a={};for(var s in e)if(-1===this.excluded.indexOf(s)&&void 0!==e[s]){var r=this.getNewItemSimple(e[s],void 0!==t?t[s]:void 0,void 0!==n?n[s]:void 0);a[s]=r}return a},this.transformObjSimple=function(e){return this.getNewItemObjectSimple(e,e._highlightResult)}},nn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.cursor?e._e():n("ul",{staticClass:"flex mt-24 mb-12 pl-0"},[e.page>0?n("li",{staticClass:"flex items-center mx-4 px-8 py-4 text-nova-grey rounded cursor-pointer bg-moon-grey",on:{click:function(t){return e.setPage(e.page-1)}}},[n("chevron-left-icon",{staticClass:"w-12 h-12"})],1):e._e(),e.pages[0]>0?[n("li",{staticClass:"flex items-center mx-4 px-8 py-4 text-nova-grey rounded cursor-pointer bg-moon-grey",on:{click:function(t){return e.setPage(0)}}},[e._v("1")]),n("li",{staticClass:"flex items-center mx-4 px-8 py-4 text-nova-grey rounded cursor-pointer"},[e._v("...")])]:e._e(),e._l(e.pages,(function(t){return n("li",{key:t,staticClass:"flex items-center mx-4 px-8 py-4 text-nova-grey rounded cursor-pointer bg-moon-grey",class:t===e.page?"border border-telluric-blue-opacity-80":"",on:{click:function(n){return e.setPage(t)}}},[n("span",[e._v(e._s(t+1))])])})),e.pages[e.pages.length-1]<e.nbPages-1?[n("li",{staticClass:"flex items-center mx-4 px-8 py-4 text-nova-grey rounded cursor-pointer"},[e._v("...")]),n("li",{staticClass:"flex items-center mx-4 px-8 py-4 text-nova-grey rounded cursor-pointer bg-moon-grey",on:{click:function(t){return e.setPage(e.nbPages-1)}}},[e._v(e._s(e.nbPages))])]:e._e(),e.page<e.nbPages-1?n("li",{staticClass:"flex items-center mx-4 px-8 py-4 text-nova-grey rounded cursor-pointer bg-moon-grey",on:{click:function(t){return e.setPage(e.page+1)}}},[n("chevron-left-icon",{staticClass:"w-12 h-12 rotate-180"})],1):e._e()],2),e.cursor?n("ul",{staticClass:"flex mt-24 mb-12 pl-0"},[n("li",{staticClass:"flex items-center mx-4 px-8 py-4 text-nova-grey rounded cursor-pointer bg-moon-grey",on:{click:function(t){return e.$emit("onDeleteParam","cursor")}}},[e._v("\n            First page\n        ")]),n("li",{staticClass:"flex items-center mx-4 px-8 py-4 text-nova-grey rounded cursor-pointer bg-moon-grey",on:{click:function(t){return e.$emit("onSetParamValue","cursor",e.cursor)}}},[e._v("\n            Next page\n        ")])]):e._e()])},an=[];function sn(e,t){for(var n=[],a=e;a<t;a++)n.push(a);return n}var rn=function(e,t){this.currentPage=e,this.total=t,this.padding=3,this.pages=function(){var e=this.total,t=this.currentPage,n=this.padding;if(0===e)return[0];var a=this.nbPagesDisplayed(n,e);if(a===e)return sn(0,e);var s=this.calculatePaddingLeft(t,n,e,a),r=a-s,i=t-s,o=t+r;return sn(i,o)},this.nbPagesDisplayed=function(e,t){return Math.min(2*e+1,t)},this.calculatePaddingLeft=function(e,t,n,a){return e<=t?e:e>=n-t?a-(n-e):t},this.isLastPage=function(){return this.currentPage===this.total-1},this.isFirstPage=function(){return 0===this.currentPage}},on={name:"Pagination",props:["page","nbPages","cursor"],components:{ChevronLeftIcon:J},computed:{pages:function(){return this.paginator.pages()},paginator:function(){return new rn(this.page,this.nbPages)}},methods:{setPage:function(e){this.page>=0&&this.page<this.nbPages&&this.$emit("onUpdatePage",e)}}},cn=on,ln=Object(F["a"])(cn,nn,an,!1,null,null,null),un=ln.exports,dn="return {\n  ...refObj,\n\n};",pn={name:"Transformer",components:{MonacoEditor:Dt,Attributes:Yt,Pagination:un,TrashIcon:Z},props:["dataset"],data:function(){return{dstObjectExample:{},transformer:dn,error:null,page:0,hitsTransformer:new tn,timeout:null,saveAs:"",savedConfig:"",hasBeenSaved:!1,transformers:[]}},created:function(){this.transformExample(),this.fetchTransformers()},watch:{transformer:function(e,t){e!==t&&(this.page=0,this.transformExample(),this.saveTransformerWithTimeout("new"))},srcObjectExample:function(){this.transformExample()}},computed:{srcObjectExample:function(){if(this.dataset&&this.dataset.length>0)return this.dataset[this.page]},nbPages:function(){return this.dataset?this.dataset.length:0},notNewTransformers:function(){return this.transformers.filter((function(e){return"new"!==e.name}))}},methods:{reset:function(){this.transformer=dn},generatedConfig:function(){var e=this.srcObjectExample,t="return {\n";function n(e,t,n){var a=t.join(".");return Ut(n)&&Vt(n)?t.length<=2?"".concat(t[0]," !== undefined ? parseFloat(").concat(a,") : undefined,\n"):"parseFloat(".concat(a,"),\n"):Array.isArray(n)?"(".concat(a," || []).map((el) => {\n    return el;  \n  }),\n"):t.length<=2?"".concat(t[0]," !== undefined ? ").concat(a," : undefined,\n"):"".concat(a,",\n")}return Object.keys(e).forEach((function(a){var s="refObj.".concat(a),r=e[a];if(Bt(r)){var i=Object.keys(r);if(i.length>0){var o=i.includes("attrs");if(1===i.length&&!o)return void(t+="  ".concat(a,": ").concat(n(a,[s,i[0]],r[i[0]])));if(t+="  ".concat(a,": {\n"),o){var c=Object.keys(r.attrs);c.forEach((function(e){t+="    ".concat(e,": ").concat(n(e,[s,"attrs",e],r[e]))}))}return i.filter((function(e){return"attrs"!==e&&("value"!==e||r[e])})).forEach((function(e){t+="    ".concat(e,": ").concat(n(e,[s,e],r[e]))})),void(t+="  },\n")}}t+="  ".concat(a,": ").concat(n(a,[s],r))})),t+="}",t},saveTransformerWithTimeout:function(e,t){var n=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){n.saveTransformer(e,t)}),3e3)},saveTransformer:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t,n){var a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return clearTimeout(this.timeout),a=Object({NODE_ENV:"production",BASE_URL:"/transform/"}).VUE_APP_METAPARAMS_BACKEND_ENDPOINT||"https://tools-backend.algolia.com",e.next=4,fetch("".concat(a,"/transformations/update"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t||"new",body:this.transformer})});case 4:this.savedConfig=t||"new",this.hasBeenSaved=!0,setTimeout((function(){s.hasBeenSaved=!1}),2e3),n&&this.fetchTransformers();case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),fetchTransformers:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object({NODE_ENV:"production",BASE_URL:"/transform/"}).VUE_APP_METAPARAMS_BACKEND_ENDPOINT||"https://tools-backend.algolia.com",e.next=3,fetch("".concat(t,"/transformations/get-all"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});case 3:return n=e.sent,e.t0=Object,e.next=7,n.json();case 7:if(e.t1=e.sent,a=e.t0.freeze.call(e.t0,e.t1),!(a.length<=0)){e.next=15;break}return e.next=12,this.saveTransformerWithTimeout("new");case 12:this.fetchTransformers(),e.next=16;break;case 15:this.transformer=a.find((function(e){return"new"===e.name})).body;case 16:this.transformers=a;case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteTransformer:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object({NODE_ENV:"production",BASE_URL:"/transform/"}).VUE_APP_METAPARAMS_BACKEND_ENDPOINT||"https://tools-backend.algolia.com",e.next=3,fetch("".concat(n,"/transformations/delete"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});case 3:this.fetchTransformers();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),transformExample:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t={algoliasearch:Te.a},n=new Function("return async function (refObj) {\n ".concat(this.transformer," \n}"))(),e.next=5,n.call(t,Object.freeze(JSON.parse(JSON.stringify(this.srcObjectExample))));case 5:this.dstObjectExample=e.sent,this.error=null,this.$emit("onUpdateTransformer",n),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),this.error=e.t0,this.dstObjectExample={},this.$emit("onUpdateTransformer",null);case 15:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()}},hn=pn,fn=Object(F["a"])(hn,Ct,Pt,!1,null,null,null),mn=fn.exports,vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",{staticClass:"mt-24 text-solstice-blue-opacity-80"},[e._v("Load into index")]),n("div",{staticClass:"mt-24"},[n("div",[n("label",{staticClass:"cursor-pointer"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.showAllApps,expression:"showAllApps"}],staticClass:"mr-4",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.showAllApps)?e._i(e.showAllApps,null)>-1:e.showAllApps},on:{change:function(t){var n=e.showAllApps,a=t.target,s=!!a.checked;if(Array.isArray(n)){var r=null,i=e._i(n,r);a.checked?i<0&&(e.showAllApps=n.concat([r])):i>-1&&(e.showAllApps=n.slice(0,i).concat(n.slice(i+1)))}else e.showAllApps=s}}}),e._v("\n                Unsafe mode (allow copy on non Algolia apps)\n\n            ")])]),n("div",{staticClass:"mt-12 flex"},[n("app-selector",{attrs:{"only-algolia":!e.showAllApps},model:{value:e.appId,callback:function(t){e.appId=t},expression:"appId"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.indexName,expression:"indexName"}],staticClass:"ml-24 input-custom mr-8 w-148",domProps:{value:e.indexName},on:{input:function(t){t.target.composing||(e.indexName=t.target.value)}}})],1)]),n("div",{staticClass:"mt-24"},[e.tasksGroup?n("task-group-view",{attrs:{"tasks-group":e.tasksGroup}}):e._e(),e.tasksGroup||e.indexInfo&&!(e.indexName.length>0&&e.indexName!==e.indexInfo.indexName)?e._e():n("div",[n("div",[n("div",[n("label",{staticClass:"cursor-pointer"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.method,expression:"method"}],attrs:{type:"radio",value:"saveObjects"},domProps:{checked:e._q(e.method,"saveObjects")},on:{change:function(t){e.method="saveObjects"}}}),e._v(" saveObjects\n                    ")])]),n("div",{staticClass:"mt-4"},[n("label",{staticClass:"cursor-pointer"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.method,expression:"method"}],attrs:{type:"radio",value:"partialUpdateObjects"},domProps:{checked:e._q(e.method,"partialUpdateObjects")},on:{change:function(t){e.method="partialUpdateObjects"}}}),e._v(" partialUpdateObjects\n                    ")])])]),n("div",{staticClass:"mt-24 flex"},[e.appId?n("div",{staticClass:"cursor-pointer bg-white rounded border border-b-0 border-proton-grey-opacity-40 shadow-sm hover:shadow transition-fast-out mr-8 px-16 p-8 text-sm",on:{click:function(t){return e.process()}}},[e._v("\n                    Load\n                ")]):n("div",{staticClass:"rounded border px-16 py-12 border-saturn-4 bg-saturn-4-opacity-40 text-saturn-1"},[e._v("\n                    You need to select an appId in order to save\n                ")])]),e.errorMessage.length>0?n("div",{staticClass:"mt-24 border border-mars-1 mt-16 p-8 rounded"},[n("pre",[e._v(e._s(e.errorMessage))])]):e._e()])],1)])},gn=[],bn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tasksGroup?n("div",[n("div",{staticClass:"mb-8"},[n("b",[e._v(e._s(e.tasksGroup.name))])]),e._l(e.tasksGroup.tasks,(function(t){return n("div",[n("div",[e._v("\n            "+e._s(t.name)+"\n            "),t.outOf?n("span",[e._v(e._s(t.nth)+"/"+e._s(t.outOf))]):e._e(),t.done?n("span",[n("check-icon",{staticClass:"w-12 h-12"})],1):e._e(),t.running?n("span",[n("loader-icon",{staticClass:"w-12 h-12 infinte-rotate"})],1):e._e()])])}))],2):e._e()},xn=[],yn={functional:!0,render(e,t){const{_c:n,_v:a,data:s,children:r=[]}=t,{class:i,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=s;return n("svg",{class:["feather feather-check",i,o],style:[c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-check"},u),...d},r.concat([n("path",{attrs:{d:"M20 6L9 17l-5-5"}})]))}},wn={props:["tasksGroup"],components:{LoaderIcon:P,CheckIcon:yn}},_n=wn,kn=Object(F["a"])(_n,bn,xn,!1,null,null,null),In=kn.exports;function On(e){this.tasks=[],this.tasksIds=[],this.name=e,this.addTask=function(e){this.tasks.push(e)},this.addAlgoliaTaskId=function(e){this.tasksIds.push(e)},this.run=Object(T["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.tasks.length)){e.next=7;break}return e.next=4,this.tasks[t].run();case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})))}function jn(e,t){this.name=e,t&&(this.callback=t),this.outOf=null,this.nth=null,this.running=!1,this.done=!1,this.setCallback=function(e){this.callback=e},this.setNth=function(e){this.nth=e},this.setOutOf=function(e){this.outOf=e},this.run=Object(T["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.running=!0,e.next=3,this.callback();case 3:this.running=!1,this.done=!0;case 5:case"end":return e.stop()}}),e,this)})))}var An={name:"Applier",props:["dataset","indexInfo","transformer","csvFile","jsonFile","xmlFile","xmlRootNode"],components:{AppSelector:Ae,IndexSelector:ht,TaskGroupView:In},data:function(){return{appId:null,indexName:this.indexInfo?"".concat(this.indexInfo.indexName,"_transformed"):"transformed_index",tasksGroup:null,errorMessage:"",showAllApps:!1,method:"saveObjects"}},methods:{chunk:function(e){var t=[],n=0,a=0,s=1e3;for(n=0,a=e.length;n<a;n+=s)t.push(e.slice(n,n+s));return t},apiKey:function(e){return this.$store.state.apps[e].key},saveObjects:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getNewHits(n);case 2:if(a=e.sent,"saveObjects"!==this.method){e.next=7;break}return e.abrupt("return",t.saveObjects(a,{autoGenerateObjectIDIfNotExist:!0}));case 7:return e.abrupt("return",t.partialUpdateObjects(a,{createIfNotExists:!0}));case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),getNewHits:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t){var n,a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=[],a={algoliasearch:Te.a},s=0;case 3:if(!(s<t.length)){e.next=21;break}return e.prev=4,e.next=7,this.transformer.call(a,t[s]);case 7:if(r=e.sent,null!==r){e.next=10;break}return e.abrupt("return");case 10:Array.isArray(r)?n.push.apply(n,Object(oe["a"])(r)):n.push(r),e.next=18;break;case 13:throw e.prev=13,e.t0=e["catch"](4),this.errorMessage=e.t0.stack,this.tasksGroup=null,e.t0;case 18:s++,e.next=3;break;case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this,[[4,13]])})));function t(t){return e.apply(this,arguments)}return t}(),process:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var t,n,a,s,r,i,o,c,l,u,d,p=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,it(this.appId,this.apiKey(this.appId));case 2:return t=e.sent,t.transporter.timeouts={read:60,write:60,connect:60},e.next=6,t.customInitIndex(this.indexName);case 6:if(n=e.sent,a=this.indexInfo?"".concat(this.indexInfo.appId,":").concat(this.indexInfo.indexName):"dataset",s=new On("Transform ".concat(a," to ").concat(this.appId,":").concat(this.indexName)),!this.indexInfo){e.next=20;break}return e.next=12,it(this.indexInfo.appId,this.apiKey(this.indexInfo.appId));case 12:r=e.sent,r.transporter.timeouts={read:60,write:60,connect:60},i=r.customInitIndex(this.indexInfo.indexName),o=new jn("Copy records"),o.setCallback(Object(T["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.customBrowse({query:"",hitsPerPage:1e3,attributesToRetrieve:["*"]});case 2:return t=e.sent,o.setNth(0),o.setOutOf(Math.ceil(t.nbHits/1e3)),e.next=7,p.saveObjects(n,t.hits);case 7:a=e.sent,a.taskIDs.forEach((function(e){return s.addAlgoliaTaskId(e)})),o.setNth(t.page+1);case 10:if(!t.cursor){e.next=21;break}return e.next=13,i.customBrowse({cursor:t.cursor});case 13:return t=e.sent,e.next=16,p.saveObjects(n,t.hits);case 16:a=e.sent,a.taskIDs.forEach((function(e){return s.addAlgoliaTaskId(e)})),o.setNth(t.page+1),e.next=10;break;case 21:case"end":return e.stop()}}),e)})))),s.addTask(o),e.next=21;break;case 20:this.jsonFile?(c=new jn("Upload records"),c.setCallback((function(){return new Promise((function(e,t){var a=0,r=[];c.setNth(0),c.setOutOf("unknown");var i=new vt(p.jsonFile,Object(T["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(r.length>0)){t.next=6;break}return t.next=3,p.saveObjects(n,r);case 3:i=t.sent,i.taskIDs.forEach((function(e){return s.addAlgoliaTaskId(e)})),c.setNth(a);case 6:e();case 7:case"end":return t.stop()}}),t)})))),o=bt()();o.node("!.[*]",function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t){var o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.push(t),a++,!(r.length>=1e3)){e.next=12;break}return i.pause(),o=r.slice(),r=[],e.next=8,p.saveObjects(n,o);case 8:l=e.sent,l.taskIDs.forEach((function(e){return s.addAlgoliaTaskId(e)})),c.setNth(a),i.resume();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.start((function(e){o.emit("data",e)}))}))})),s.addTask(c)):this.csvFile?(l=new jn("Upload records"),l.setCallback((function(){return new Promise((function(e,t){var a=[],r=0;l.setNth(0),l.setOutOf("unknown"),mt.a.parse(p.csvFile,{header:!0,delimitersToGuess:[",",";","\t","#"],step:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t,i){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.push(t.data),r++,!(a.length>=1e3)){e.next=11;break}return i.pause(),e.next=6,p.saveObjects(n,a);case 6:o=e.sent,o.taskIDs.forEach((function(e){return s.addAlgoliaTaskId(e)})),l.setNth(r),a=[],i.resume();case 11:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),complete:function(){var t=Object(T["a"])(regeneratorRuntime.mark((function t(i){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(a.length>0)){t.next=6;break}return t.next=3,p.saveObjects(n,a);case 3:o=t.sent,o.taskIDs.forEach((function(e){return s.addAlgoliaTaskId(e)})),l.setNth(r);case 6:e();case 7:case"end":return t.stop()}}),t)})));function i(e){return t.apply(this,arguments)}return i}()})}))})),s.addTask(l)):this.xmlFile&&(u=new jn("Upload records"),u.setCallback((function(){return new Promise((function(e,t){var a=0,r=[];u.setNth(0),u.setOutOf("unknown");var i=new kt(p.xmlRootNode,function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t){var i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.push(t),a++,!(r.length>=1e3)){e.next=12;break}return o.pause(),i=r.slice(),r=[],e.next=8,p.saveObjects(n,i);case 8:c=e.sent,c.taskIDs.forEach((function(e){return s.addAlgoliaTaskId(e)})),u.setNth(a),o.resume();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o=new vt(p.xmlFile,Object(T["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(r.length>0)){t.next=6;break}return t.next=3,p.saveObjects(n,r);case 3:o=t.sent,o.taskIDs.forEach((function(e){return s.addAlgoliaTaskId(e)})),u.setNth(a);case 6:i.close(),e();case 8:case"end":return t.stop()}}),t)}))));o.start((function(e){i.write(e)}))}))})),s.addTask(u));case 21:return d=new jn("Wait Tasks"),d.setCallback(Object(T["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(s.tasksIds.length>0)){e.next=11;break}d.setNth(0),d.setOutOf(s.tasksIds.length),t=0;case 4:if(!(t<s.tasksIds.length)){e.next=11;break}return e.next=7,n.waitTask(s.tasksIds[t]);case 7:d.setNth(t+1);case 8:t++,e.next=4;break;case 11:case"end":return e.stop()}}),e)})))),s.addTask(d),this.tasksGroup=s,this.$root.$emit("onShouldPauseProxy"),e.prev=26,this.errorMessage="",e.next=30,this.tasksGroup.run();case 30:e.next=37;break;case 32:throw e.prev=32,e.t0=e["catch"](26),this.errorMessage=e.t0.message,this.tasksGroup=null,e.t0;case 37:this.$root.$emit("onShouldResumeProxy"),this.tasksGroup=null;case 39:case"end":return e.stop()}}),e,this,[[26,32]])})));function t(){return e.apply(this,arguments)}return t}()}},Cn=An,Pn=Object(F["a"])(Cn,vn,gn,!1,null,null,null),Nn=Pn.exports,Sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"flex text-telluric-blue text-sm"},[n("div",{class:Object.keys(e.$store.state.apps).length>0?"ml-48":"ml-auto"},[e._m(0),n("div",{staticClass:"flex h-48"},[n("div",{staticClass:"h-full flex items-center text-center block bg-white rounded border border-b-0 border-proton-grey-opacity-40 shadow-sm hover:shadow transition-fast-out mr-16"},[n("button",{staticClass:"h-full py-8 px-16",on:{click:function(t){e.manageAppsPanel=!e.manageAppsPanel}}},[n("div",[n("box-icon",{staticClass:"w-auto h-16 fill-current",class:[e.manageAppsPanel?"text-nebula-blue":"text-cosmos-black-opacity-60"]})],1),n("div",{staticClass:"mt-4"},[e._v("\n                            Manage AppIDs\n                        ")])])])])])])])},Tn=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mb-8"},[n("h4",[e._v("Management")])])}],En={name:"DisplayConfig",components:{BoxIcon:_e},computed:{manageAppsPanel:{get:function(){return this.$store.state.panels.manageAppsPanel},set:function(e){this.$store.commit("panels/setManageAppsPanel",e)}}}},Rn=En,Fn=Object(F["a"])(Rn,Sn,Tn,!1,null,null,null),Dn=Fn.exports,Mn={name:"App",components:{Applier:Nn,Transformer:mn,DatasetSelector:At,InternalApp:B,AppHeader:X,AppManagement:se,DisplayConfig:Dn},data:function(){return{transformer:null,dataset:null,indexInfo:null,csvFile:null,jsonFile:null,xmlFile:null,xmlRootNode:"item"}}},$n=Mn,Ln=Object(F["a"])($n,O,j,!1,null,null,null),Kn=Ln.exports;a["a"].config.productionTip=!1,a["a"].config.performance=!0,new a["a"]({render:function(e){return e(Kn)},store:I}).$mount("#app")}});
//# sourceMappingURL=app.15fe46c2.js.map